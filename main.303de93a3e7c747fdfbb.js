(self.webpackChunkscrollytelling_template=self.webpackChunkscrollytelling_template||[]).push([[792],{94871:(e,t,r)=>{"use strict";var n=r(19904),o=r(19313),a=r(84144),l=r.n(a);const s=JSON.parse('{"DD":"Titre de l\'article"}');let c=document.querySelectorAll(".social-buttons .svg");function i(e){return encodeURIComponent(e).replace(/%20/g,"+")}c.forEach((e=>{e.addEventListener("mouseover",(()=>{e.querySelector(".normal").style.display="none",e.querySelector(".hover").style.display="block"}))})),c.forEach((e=>{e.addEventListener("mouseout",(()=>{e.querySelector(".normal").style.display="block",e.querySelector(".hover").style.display="none"}))}));const d=i(window.location.href),u=i(s.DD),p=`https://www.linkedin.com/sharing/share-offsite/?url=${d}`,y=`https://twitter.com/intent/tweet?text=${u}+${d}`,m=`https://bsky.app/intent/compose?text=${u}+${d}`;document.querySelector(".linkedin").href=p,document.querySelector(".twitter").href=y,document.querySelector(".bluesky").href=m,r(66314),r(12453);var g=r(14685);const h=g.A.shapeFromText({text:"ðŸ§¸",scalar:2.5});function f(e,t){(0,g.A)({particleCount:80,spread:60,origin:{x:e,y:t}}),(0,g.A)({particleCount:20,spread:60,origin:{x:e,y:t},shapes:[h],scalar:2.5})}document.querySelectorAll(".answerType.active").forEach((e=>{e.addEventListener("click",(e=>{f(e.clientX/window.innerWidth,e.clientY/window.innerHeight)}))})),document.addEventListener("mixmatch:completed",(e=>{console.log("event for mix");const t=e.target.getBoundingClientRect();f((t.left+t.width/2)/window.innerWidth,(t.top+t.height/2)/window.innerHeight)}));var v=r(82617),w=r.n(v);function b(e){e.style.transform="translate(0px, 0px)",e.setAttribute("data-x",0),e.setAttribute("data-y",0),e.style.transition="transform 0.25s",setTimeout((()=>e.style.transition=""),300)}document.querySelectorAll(".mixAndMatch").forEach(((e,t)=>{e.dataset.gameId=`game-${t}`,function(e){const t=e.dataset.gameId;e.querySelectorAll(".draggable").forEach((e=>{e.style.transform="translate(0px, 0px)",e.setAttribute("data-x",0),e.setAttribute("data-y",0)})),w()(`[data-game-id="${t}"] .draggable`).draggable({inertia:!0,autoScroll:!1,modifiers:[w().modifiers.restrictRect({restriction:e,endOnly:!0})],listeners:{move(e){const t=e.target;let r=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,n=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.transform=`translate(${r}px, ${n}px)`,t.setAttribute("data-x",r),t.setAttribute("data-y",n)},end(e){const t=e.target;t.classList.contains("dropped")||b(t)}}}),w()(`[data-game-id="${t}"] .dropzone`).dropzone({accept:`[data-game-id="${t}"] .draggable`,overlap:.5,ondragenter(e){e.target.style.background="#c8f7c5"},ondragleave(e){e.target.style.background="#ddd"},ondrop(t){const r=t.relatedTarget,n=t.target,o=r.dataset.id,a=n.dataset.accept;if(n.style.background="#ddd",o===a){r.classList.add("dropped"),r.style.transform="translate(0px, 0px)",r.setAttribute("data-x",0),r.setAttribute("data-y",0),n.appendChild(r);const t=n.querySelector(".drop-label");t&&(t.innerText=""),n.style.pointerEvents="none",function(e){[...e.querySelectorAll(".dropzone")].every((e=>"none"===e.style.pointerEvents))&&(console.log("game "),e.dispatchEvent(new CustomEvent("mixmatch:completed",{bubbles:!0})))}(e)}else r.classList.remove("dropped"),b(r)}})}(e)}));let x=[];[".viz",".full-page-section > img",".full-page-section > video"].forEach((e=>{x=x.concat(Array.from(document.querySelectorAll(e)))})),(0,n.A)(x,{stickyBitStickyOffset:40}),o.Ubm("#collapseElement").each((function(e,t){const r=o.Ltv(this).select("#collapseContent"),n=o.Ltv(this).select("#collapseMenu");n.select("button").on("click",(()=>{r.classed("show-content",!r.classed("show-content"))})),n.select("#collapseMenuText").on("click",(()=>{r.classed("show-content",!r.classed("show-content"))}))})),new(l())({elements_selector:".lazy",threshold:500})},66314:()=>{document.querySelectorAll(".carousel").forEach((e=>{let t=0;const r=e.querySelector(".carousel-items"),n=e.querySelector(".carousel-caption"),o=r.querySelectorAll("figure"),a=n.querySelector(".previous"),l=n.querySelector(".next"),s=n.querySelector(".index"),c=n.querySelector(".text");function i(e){o.item(t).classList.remove("active"),t=e,r.style.left=100*-t+"%",o.item(t).classList.add("active"),a.disabled=0===t,l.disabled=t===o.length-1,s.innerHTML=`${t+1} / ${o.length}`,c.innerHTML=o.item(t).querySelector("figcaption").innerHTML}r.style.width=100*o.length+"%",i(t),o.forEach(((e,r)=>{e.addEventListener("click",(e=>{r!==t&&i(r)}))})),a.addEventListener("click",(()=>{t<=0||i(t-1)})),l.addEventListener("click",(()=>{t>=o.length-1||i(t+1)}))}))},12453:()=>{let e,t=document.querySelectorAll(".items");var r=window.pageYOffset||document.documentElement.scrollTop;let n;window.addEventListener("scroll",(()=>{let o=window.scrollY,a=window.pageYOffset||document.documentElement.scrollTop;a>r?n=!1:a<r&&(n=!0),r=a<=0?0:a,e=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){parseFloat(e.target.dataset.mintop),parseFloat(e.target.dataset.maxtop);let t=e.target.dataset.speed,r=e.boundingClientRect.y*o*t;e.target.style.opacity="1",e.target.style.transform="translateY("+r+"px)"}else e.target.style.opacity="0"}))})),t.forEach((t=>{e.observe(t)}))}),!1)}},e=>{var t=t=>e(e.s=t);e.O(0,[96],(()=>(t(84315),t(7452),t(94871)))),e.O()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RTdCVCxFQUFXLElBQUlVLHNCQUFxQkMsSUFDaENBLEVBQVExSSxTQUFRMkksSUFDWixHQUFHQSxFQUFNQyxlQUFlLENBQ1I5RSxXQUFXNkUsRUFBTXZHLE9BQU9hLFFBQVE0RixRQUMvQi9FLFdBQVc2RSxFQUFNdkcsT0FBT2EsUUFBUTZGLFFBRDdDLElBRUlDLEVBQVFKLEVBQU12RyxPQUFPYSxRQUFROEYsTUFFN0JDLEVBRE9MLEVBQU1NLG1CQUFtQjNILEVBQ2xCZ0gsRUFBUVMsRUFFMUJKLEVBQU12RyxPQUFPaEMsTUFBTThJLFFBQVUsSUFJckJQLEVBQU12RyxPQUFPaEMsTUFBTXVDLFVBQVksY0FBZXFHLEVBQU0sS0FVaEUsTUFFSUwsRUFBTXZHLE9BQU9oQyxNQUFNOEksUUFBVSxHQUNqQyxHQUNGLElBR05sQixFQUFNaEksU0FBUTBILElBQ1ZLLEVBQVNvQixRQUFRekIsRUFBSyxHQUN4QixJQUNILEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvc2V0VXAvc29jaWFsTWVkaWFIZWFkZXIuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL3NlY3Rpb25Db21wb25lbnRzL2NvbmZldHRpLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9zZWN0aW9uQ29tcG9uZW50cy9taXhBbmRNYXRjaC5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvYXBwLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9zZWN0aW9uQ29tcG9uZW50cy9jb2xsYXBzZUl0ZW0uanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL3NlY3Rpb25Db21wb25lbnRzL2Nhcm91c2VsLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9zZWN0aW9uQ29tcG9uZW50cy9wYXJhbGF4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIElNUE9SVFMgKi9cbmltcG9ydCBjb25maWcgZnJvbSAnLi4vLi4vY29uZmlnLmpzb24nO1xuXG5cbi8vQWRkIEhvdmVyIGVmZmVjdCBvbiBzb2NpYWwgYnV0dG9uc1xubGV0IHNvY2lhbEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNvY2lhbC1idXR0b25zIC5zdmdcIilcblxuLy9EaXNwbGF5IGhvdmVyIHN2Z1xuc29jaWFsQnV0dG9ucy5mb3JFYWNoKGVsID0+IHtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsICgpID0+IHtcblxuICAgICAgICBlbC5xdWVyeVNlbGVjdG9yKFwiLm5vcm1hbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcbiAgICAgICAgZWwucXVlcnlTZWxlY3RvcihcIi5ob3ZlclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiXG4gICAgfSlcbn0pXG4vL0hpZGUgaG92ZXIgc3ZnXG5zb2NpYWxCdXR0b25zLmZvckVhY2goZWwgPT4ge1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCAoKSA9PiB7XG5cbiAgICAgICAgZWwucXVlcnlTZWxlY3RvcihcIi5ub3JtYWxcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIlxuICAgICAgICBlbC5xdWVyeVNlbGVjdG9yKFwiLmhvdmVyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuICAgIH0pXG59KVxuXG5cbi8vRnVuY3Rpb24gdGhhdCBlbmNvZGVzIHN0cmluZyBhbmQgcmVwbGFjZXMgc3BhY2VzIGJ5ICtcbmZ1bmN0aW9uIGVuY29kZVN0cmluZyhzdHJpbmcpIHtcbiAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZykucmVwbGFjZSgvJTIwL2csICcrJyk7XG59XG5cbmNvbnN0IG1vZGlmaWVkVXJsID0gZW5jb2RlU3RyaW5nKHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxuY29uc3QgbW9kaWZpZWRUaXRsZSA9IGVuY29kZVN0cmluZyhjb25maWcudGl0bGUpXG5cbi8vQnVpbGQgdGhlIHNvY2lhbCBtZWRpYSBzaGFyaW5nIFVSTFxuY29uc3QgbGlua2VkaW5TaGFyZVVybCA9IGBodHRwczovL3d3dy5saW5rZWRpbi5jb20vc2hhcmluZy9zaGFyZS1vZmZzaXRlLz91cmw9JHttb2RpZmllZFVybH1gO1xuY29uc3QgdHdpdHRlclNoYXJlVXJsID0gYGh0dHBzOi8vdHdpdHRlci5jb20vaW50ZW50L3R3ZWV0P3RleHQ9JHttb2RpZmllZFRpdGxlfSske21vZGlmaWVkVXJsfWA7XG5jb25zdCBibHVlc2t5U2hhcmVVcmwgPSBgaHR0cHM6Ly9ic2t5LmFwcC9pbnRlbnQvY29tcG9zZT90ZXh0PSR7bW9kaWZpZWRUaXRsZX0rJHttb2RpZmllZFVybH1gXG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5saW5rZWRpbicpLmhyZWYgPSBsaW5rZWRpblNoYXJlVXJsO1xuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50d2l0dGVyXCIpLmhyZWYgPSB0d2l0dGVyU2hhcmVVcmw7XG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJsdWVza3lcIikuaHJlZiA9IGJsdWVza3lTaGFyZVVybDsiLCJpbXBvcnQgY29uZmV0dGkgZnJvbSBcImNhbnZhcy1jb25mZXR0aVwiO1xuXG4vLyBDcmVhdGUgdGhlIGVtb2ppIHNoYXBlIG9uY2VcbmNvbnN0IHNjYWxhciA9IDIuNTtcbmNvbnN0IHRlZGR5U2hhcGUgPSBjb25mZXR0aS5zaGFwZUZyb21UZXh0KHsgdGV4dDogXCLwn6e4XCIsIHNjYWxhciB9KTtcblxuLy8gQnVyc3QgZnVuY3Rpb24gdXNlZCBmb3IgYm90aCBjbGljayBhbmQgbWl4TWF0Y2hcbmZ1bmN0aW9uIGZpcmVDb25mZXR0aUF0KHgsIHkpIHtcbiAgY29uZmV0dGkoe1xuICAgIHBhcnRpY2xlQ291bnQ6IDgwLFxuICAgIHNwcmVhZDogNjAsXG4gICAgb3JpZ2luOiB7IHgsIHkgfVxuICB9KTtcblxuICBjb25mZXR0aSh7XG4gICAgcGFydGljbGVDb3VudDogMjAsXG4gICAgc3ByZWFkOiA2MCxcbiAgICBvcmlnaW46IHsgeCwgeSB9LFxuICAgIHNoYXBlczogW3RlZGR5U2hhcGVdLFxuICAgIHNjYWxhclxuICB9KTtcbn1cblxuLy8gRXhpc3RpbmcgbG9naWMgKGNsaWNrIGNvbmZldHRpKVxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hbnN3ZXJUeXBlLmFjdGl2ZVwiKS5mb3JFYWNoKGJ0biA9PiB7XG4gIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBsZXQgeCA9IGUuY2xpZW50WCAvIHdpbmRvdy5pbm5lcldpZHRoO1xuICAgIGxldCB5ID0gZS5jbGllbnRZIC8gd2luZG93LmlubmVySGVpZ2h0O1xuICAgIGZpcmVDb25mZXR0aUF0KHgsIHkpO1xuICB9KTtcbn0pO1xuXG4vLyBORVc6IExpc3RlbiBmb3IgTWl4ICYgTWF0Y2ggY29tcGxldGlvblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1peG1hdGNoOmNvbXBsZXRlZFwiLCAoZSkgPT4ge1xuICBjb25zb2xlLmxvZyhcImV2ZW50IGZvciBtaXhcIilcbiAgY29uc3QgZ2FtZUVsID0gZS50YXJnZXQ7XG4gIGNvbnN0IHJlY3QgPSBnYW1lRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgLy8gZmlyZSBjb25mZXR0aSBmcm9tIGNlbnRlciBvZiB0aGUgZ2FtZVxuICBjb25zdCB4ID0gKHJlY3QubGVmdCArIHJlY3Qud2lkdGggLyAyKSAvIHdpbmRvdy5pbm5lcldpZHRoO1xuICBjb25zdCB5ID0gKHJlY3QudG9wICsgcmVjdC5oZWlnaHQgLyAyKSAvIHdpbmRvdy5pbm5lckhlaWdodDtcblxuICBmaXJlQ29uZmV0dGlBdCh4LCB5KTtcbn0pO1xuIiwiaW1wb3J0IGludGVyYWN0IGZyb20gXCJpbnRlcmFjdGpzXCI7XG5cbi8vIEluaXRpYWxpemUgZWFjaCBnYW1lIHNlcGFyYXRlbHlcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubWl4QW5kTWF0Y2hcIikuZm9yRWFjaCgoZ2FtZUVsLCBpbmRleCkgPT4ge1xuICBcbiAgLy8gR2l2ZSBlYWNoIGluc3RhbmNlIGEgdW5pcXVlIGF0dHJpYnV0ZSBmb3Igc2NvcGluZ1xuICBnYW1lRWwuZGF0YXNldC5nYW1lSWQgPSBgZ2FtZS0ke2luZGV4fWA7XG5cbiAgc2V0dXBNaXhBbmRNYXRjaEdhbWUoZ2FtZUVsKTtcbn0pO1xuXG5mdW5jdGlvbiBzZXR1cE1peEFuZE1hdGNoR2FtZShnYW1lRWwpIHtcblxuICBjb25zdCBnYW1lSWQgPSBnYW1lRWwuZGF0YXNldC5nYW1lSWQ7XG5cbiAgLy8gU2F2ZSBvcmlnaW5hbCBwb3NpdGlvbnNcbiAgZ2FtZUVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZHJhZ2dhYmxlXCIpLmZvckVhY2goZWwgPT4ge1xuICAgIGVsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlKDBweCwgMHB4KVwiO1xuICAgIGVsLnNldEF0dHJpYnV0ZShcImRhdGEteFwiLCAwKTtcbiAgICBlbC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXlcIiwgMCk7XG4gIH0pO1xuXG4gIC8vIE1ha2UgaXRlbXMgZHJhZ2dhYmxlIGZvciAqdGhpcyogZ2FtZVxuICBpbnRlcmFjdChgW2RhdGEtZ2FtZS1pZD1cIiR7Z2FtZUlkfVwiXSAuZHJhZ2dhYmxlYCkuZHJhZ2dhYmxlKHtcbiAgICBpbmVydGlhOiB0cnVlLFxuICAgIGF1dG9TY3JvbGw6IGZhbHNlLFxuXG4gICAgbW9kaWZpZXJzOiBbXG4gICAgICAgIGludGVyYWN0Lm1vZGlmaWVycy5yZXN0cmljdFJlY3Qoe1xuICAgICAgICAgIHJlc3RyaWN0aW9uOiBnYW1lRWwsICAgIC8vIHJlc3RyaWN0IHRvIFRISVMgc3BlY2lmaWMgZ2FtZVxuICAgICAgICAgIGVuZE9ubHk6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIF0sXG5cbiAgICBsaXN0ZW5lcnM6IHtcbiAgICAgIG1vdmUoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuXG4gICAgICAgIGxldCB4ID0gKHBhcnNlRmxvYXQodGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEteFwiKSkgfHwgMCkgKyBldmVudC5keDtcbiAgICAgICAgbGV0IHkgPSAocGFyc2VGbG9hdCh0YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS15XCIpKSB8fCAwKSArIGV2ZW50LmR5O1xuXG4gICAgICAgIHRhcmdldC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7eH1weCwgJHt5fXB4KWA7XG4gICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXhcIiwgeCk7XG4gICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXlcIiwgeSk7XG4gICAgICB9LFxuXG4gICAgICBlbmQoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJkcm9wcGVkXCIpKSB7XG4gICAgICAgICAgcmVzZXRQb3NpdGlvbih0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvLyBEcm9wem9uZXMgZm9yICp0aGlzKiBnYW1lXG4gIGludGVyYWN0KGBbZGF0YS1nYW1lLWlkPVwiJHtnYW1lSWR9XCJdIC5kcm9wem9uZWApLmRyb3B6b25lKHtcbiAgICBhY2NlcHQ6IGBbZGF0YS1nYW1lLWlkPVwiJHtnYW1lSWR9XCJdIC5kcmFnZ2FibGVgLFxuICAgIG92ZXJsYXA6IDAuNSxcblxuICAgIG9uZHJhZ2VudGVyKGV2ZW50KSB7XG4gICAgICBldmVudC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwiI2M4ZjdjNVwiO1xuICAgIH0sXG5cbiAgICBvbmRyYWdsZWF2ZShldmVudCkge1xuICAgICAgZXZlbnQudGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSBcIiNkZGRcIjtcbiAgICB9LFxuXG4gICAgb25kcm9wKGV2ZW50KSB7XG4gICAgICBjb25zdCBkcmFnZ2FibGUgPSBldmVudC5yZWxhdGVkVGFyZ2V0O1xuICAgICAgY29uc3QgZHJvcHpvbmUgPSBldmVudC50YXJnZXQ7XG5cbiAgICAgIGNvbnN0IGRyYWdJZCA9IGRyYWdnYWJsZS5kYXRhc2V0LmlkO1xuICAgICAgY29uc3QgYWNjZXB0SWQgPSBkcm9wem9uZS5kYXRhc2V0LmFjY2VwdDtcblxuICAgICAgZHJvcHpvbmUuc3R5bGUuYmFja2dyb3VuZCA9IFwiI2RkZFwiO1xuXG4gICAgICBpZiAoZHJhZ0lkID09PSBhY2NlcHRJZCkge1xuICAgICAgICBkcmFnZ2FibGUuY2xhc3NMaXN0LmFkZChcImRyb3BwZWRcIik7XG5cbiAgICAgICAgZHJhZ2dhYmxlLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlKDBweCwgMHB4KVwiO1xuICAgICAgICBkcmFnZ2FibGUuc2V0QXR0cmlidXRlKFwiZGF0YS14XCIsIDApO1xuICAgICAgICBkcmFnZ2FibGUuc2V0QXR0cmlidXRlKFwiZGF0YS15XCIsIDApO1xuXG4gICAgICAgIGRyb3B6b25lLmFwcGVuZENoaWxkKGRyYWdnYWJsZSk7XG5cbiAgICAgICAgY29uc3QgbGFiZWwgPSBkcm9wem9uZS5xdWVyeVNlbGVjdG9yKFwiLmRyb3AtbGFiZWxcIik7XG4gICAgICAgIGlmIChsYWJlbCkge1xuICAgICAgICAgICAgbGFiZWwuaW5uZXJUZXh0ID0gXCJcIlxuICAgICAgICB9XG5cbiAgICAgICAgZHJvcHpvbmUuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwibm9uZVwiO1xuXG4gICAgICAgIC8vIOKtkCBDSEVDSyBJRiBHQU1FIElTIENPTVBMRVRFRCBCRUZPUkUgRklSSU5HIEVWRU5UXG4gICAgICAgIGNoZWNrSWZHYW1lRmluaXNoZWQoZ2FtZUVsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRyYWdnYWJsZS5jbGFzc0xpc3QucmVtb3ZlKFwiZHJvcHBlZFwiKTtcbiAgICAgICAgcmVzZXRQb3NpdGlvbihkcmFnZ2FibGUpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5cbi8vIPCfjq8gQ2hlY2tzIGlmIHRoZSBnYW1lIGlzIGNvbXBsZXRlXG5mdW5jdGlvbiBjaGVja0lmR2FtZUZpbmlzaGVkKGdhbWVFbCkge1xuICAgIGNvbnN0IGRyb3B6b25lcyA9IGdhbWVFbC5xdWVyeVNlbGVjdG9yQWxsKFwiLmRyb3B6b25lXCIpO1xuICBcbiAgICBjb25zdCBhbGxDb21wbGV0ZWQgPSBbLi4uZHJvcHpvbmVzXS5ldmVyeSh6b25lID0+XG4gICAgICB6b25lLnN0eWxlLnBvaW50ZXJFdmVudHMgPT09IFwibm9uZVwiXG4gICAgKTtcbiAgXG4gICAgaWYgKGFsbENvbXBsZXRlZCkge1xuICAgICAgY29uc29sZS5sb2coXCJnYW1lIFwiKVxuICAgICAgZ2FtZUVsLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwibWl4bWF0Y2g6Y29tcGxldGVkXCIsIHsgYnViYmxlczogdHJ1ZSB9KSk7XG4gICAgfVxuICB9XG5cbmZ1bmN0aW9uIHJlc2V0UG9zaXRpb24oZWwpIHtcbiAgZWwuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUoMHB4LCAwcHgpXCI7XG4gIGVsLnNldEF0dHJpYnV0ZShcImRhdGEteFwiLCAwKTtcbiAgZWwuc2V0QXR0cmlidXRlKFwiZGF0YS15XCIsIDApO1xuXG4gIGVsLnN0eWxlLnRyYW5zaXRpb24gPSBcInRyYW5zZm9ybSAwLjI1c1wiO1xuICBzZXRUaW1lb3V0KCgpID0+IChlbC5zdHlsZS50cmFuc2l0aW9uID0gXCJcIiksIDMwMCk7XG59XG4iLCIvKipcbiAqIGFwcC5qc1xuICogPT09PT09XG4gKiBNYWluIGZpbGUgb2YgdGhlIGFwcGxpY2F0aW9uLiBUaGlzIGZpbGUgaXMgdXNlZCB0byBpbml0aWFsaXplIHRoZSBzY3JvbGxlciBhbmQgaW1wb3J0cyB0aGUgdmlzdWFsaXphdGlvbnMgdXNlZC5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCAnLi4vYXNzZXRzL3N0eWxlcy9zdHlsZS5zY3NzJztcblxuY29uc3QgaGVhZGVySGVpZ2h0ID0gNDA7XG5pbXBvcnQgc3RpY2t5Qml0cyBmcm9tICdzdGlja3liaXRzJ1xuXG5sZXQgZWxlbWVudHMgPSBbXTtcblsnLnZpeicsICcuZnVsbC1wYWdlLXNlY3Rpb24gPiBpbWcnLCAnLmZ1bGwtcGFnZS1zZWN0aW9uID4gdmlkZW8nXS5mb3JFYWNoKHNlbGVjdG9yID0+IHtcbiAgZWxlbWVudHMgPSBlbGVtZW50cy5jb25jYXQoQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSkpO1xufSk7XG5zdGlja3lCaXRzKGVsZW1lbnRzLCB7IHN0aWNreUJpdFN0aWNreU9mZnNldDogaGVhZGVySGVpZ2h0IH0pO1xuXG5pbXBvcnQgeyBpbml0aWFsaXplIGFzIHYxIH0gZnJvbSAnLi9zZWN0aW9uQ29tcG9uZW50cy92aXonO1xuaW1wb3J0IHsgc2Nyb2xsZXIgfSBmcm9tICcuL3NldFVwL3Njcm9sbGVyJztcbmltcG9ydCBMYXp5TG9hZCBmcm9tIFwidmFuaWxsYS1sYXp5bG9hZFwiO1xuaW1wb3J0ICcuL3NldFVwL3NvY2lhbE1lZGlhSGVhZGVyJ1xuXG5pbXBvcnQgeyBjb2xsYXBzZUl0ZW0gfSBmcm9tIFwiLi9zZWN0aW9uQ29tcG9uZW50cy9jb2xsYXBzZUl0ZW1cIjtcbmltcG9ydCAnLi9zZWN0aW9uQ29tcG9uZW50cy9jYXJvdXNlbCc7XG5pbXBvcnQgJy4vc2VjdGlvbkNvbXBvbmVudHMvcGFyYWxheCc7XG5pbXBvcnQgJy4vc2VjdGlvbkNvbXBvbmVudHMvY29uZmV0dGknO1xuaW1wb3J0ICcuL3NlY3Rpb25Db21wb25lbnRzL21peEFuZE1hdGNoJztcblxuY29sbGFwc2VJdGVtKClcblxuXG5jb25zdCBsbCA9IG5ldyBMYXp5TG9hZCh7XG4gIGVsZW1lbnRzX3NlbGVjdG9yOiBcIi5sYXp5XCIsXG4gIHRocmVzaG9sZDogNTAwXG59KTtcblxuIiwiaW1wb3J0ICogYXMgZDMgZnJvbSBcImQzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb2xsYXBzZUl0ZW0oKSB7XG4gIGNvbnN0IGFsbENvbGxhcHNlRWxlbSA9IGQzLnNlbGVjdEFsbChcIiNjb2xsYXBzZUVsZW1lbnRcIik7XG5cbiAgYWxsQ29sbGFwc2VFbGVtLmVhY2goZnVuY3Rpb24gKGQsIGkpIHtcbiAgICBjb25zdCBjb2xsYXBzZUNvbnRlbnQgPSBkMy5zZWxlY3QodGhpcylcbiAgICAgIC5zZWxlY3QoXCIjY29sbGFwc2VDb250ZW50XCIpO1xuXG4gICAgY29uc3QgY29sbGFwc2VNZW51ID0gZDMuc2VsZWN0KHRoaXMpXG4gICAgICAuc2VsZWN0KFwiI2NvbGxhcHNlTWVudVwiKTtcblxuICAgIGNvbGxhcHNlTWVudS5zZWxlY3QoXCJidXR0b25cIilcbiAgICAgIC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNvbGxhcHNlQ29udGVudC5jbGFzc2VkKCdzaG93LWNvbnRlbnQnLCAhY29sbGFwc2VDb250ZW50LmNsYXNzZWQoJ3Nob3ctY29udGVudCcpKTtcbiAgICAgIH0pO1xuXG4gICAgY29sbGFwc2VNZW51LnNlbGVjdChcIiNjb2xsYXBzZU1lbnVUZXh0XCIpXG4gICAgICAub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjb2xsYXBzZUNvbnRlbnQuY2xhc3NlZCgnc2hvdy1jb250ZW50JywgIWNvbGxhcHNlQ29udGVudC5jbGFzc2VkKCdzaG93LWNvbnRlbnQnKSk7XG4gICAgICB9KTtcbiAgfSk7XG59IiwiZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcm91c2VsJykuZm9yRWFjaChjYXJvdXNlbCA9PiB7XG4gIGxldCBpbmRleCAgPSAwO1xuXG4gIGNvbnN0IGNvbnRhaW5lciA9IGNhcm91c2VsLnF1ZXJ5U2VsZWN0b3IoJy5jYXJvdXNlbC1pdGVtcycpO1xuICBjb25zdCBjYXB0aW9uID0gY2Fyb3VzZWwucXVlcnlTZWxlY3RvcignLmNhcm91c2VsLWNhcHRpb24nKTtcblxuICBjb25zdCBmaWd1cmVzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ZpZ3VyZScpO1xuICBjb25zdCBwcmV2aW91c0J1dHRvbiA9IGNhcHRpb24ucXVlcnlTZWxlY3RvcignLnByZXZpb3VzJyk7XG4gIGNvbnN0IG5leHRCdXR0b24gPSBjYXB0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5uZXh0Jyk7XG5cbiAgY29uc3QgaW5kZXhUZXh0ID0gY2FwdGlvbi5xdWVyeVNlbGVjdG9yKCcuaW5kZXgnKTtcbiAgY29uc3QgY2FwdGlvblRleHQgPSBjYXB0aW9uLnF1ZXJ5U2VsZWN0b3IoJy50ZXh0Jyk7XG5cbiAgY29udGFpbmVyLnN0eWxlLndpZHRoID0gYCR7ZmlndXJlcy5sZW5ndGggKiAxMDB9JWA7XG4gIHVwZGF0ZShpbmRleCk7XG5cbiAgZmlndXJlcy5mb3JFYWNoKChmaWd1cmUsIGkpID0+IHtcbiAgICBmaWd1cmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgIGlmIChpID09PSBpbmRleCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB1cGRhdGUoaSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHByZXZpb3VzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGlmIChpbmRleCA8PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHVwZGF0ZShpbmRleCAtIDEpO1xuICB9KTtcblxuICBuZXh0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGlmIChpbmRleCA+PSBmaWd1cmVzLmxlbmd0aCAtIDEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdXBkYXRlKGluZGV4ICsgMSk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHVwZGF0ZShpKSB7XG4gICAgZmlndXJlcy5pdGVtKGluZGV4KS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICBpbmRleCA9IGk7XG4gICAgY29udGFpbmVyLnN0eWxlLmxlZnQgPSBgJHstaW5kZXggKiAxMDB9JWA7XG4gICAgZmlndXJlcy5pdGVtKGluZGV4KS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICBwcmV2aW91c0J1dHRvbi5kaXNhYmxlZCA9IGluZGV4ID09PSAwO1xuICAgIG5leHRCdXR0b24uZGlzYWJsZWQgPSBpbmRleCA9PT0gZmlndXJlcy5sZW5ndGggLSAxO1xuICAgIGluZGV4VGV4dC5pbm5lckhUTUwgPSBgJHtpbmRleCArIDF9IC8gJHtmaWd1cmVzLmxlbmd0aH1gO1xuICAgIGNhcHRpb25UZXh0LmlubmVySFRNTCA9IGZpZ3VyZXMuaXRlbShpbmRleCkucXVlcnlTZWxlY3RvcignZmlnY2FwdGlvbicpLmlubmVySFRNTDtcbiAgfVxufSk7XG4iLCJsZXQgaXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLml0ZW1zXCIpXG5sZXQgb2JzZXJ2ZXI7XG52YXIgbGFzdFNjcm9sbFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xubGV0IHNjcm9sbFVwO1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCAoKT0+e1xuICAgIGxldCB2YWx1ZSA9IHdpbmRvdy5zY3JvbGxZXG4gICAgbGV0IHN0ID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG4gICAgXG5cbiAgICBpZiAoc3QgPiBsYXN0U2Nyb2xsVG9wKXtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcInNjcm9sbGluZyBkb3duXCIpXG4gICAgICAgIHNjcm9sbFVwID0gZmFsc2VcbiAgIH1lbHNlIGlmIChzdCA8IGxhc3RTY3JvbGxUb3Ape1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwic2Nyb2xsaW5nIHVwXCIpXG4gICAgICAgIHNjcm9sbFVwID0gdHJ1ZVxuICAgfVxuXG4gICBsYXN0U2Nyb2xsVG9wID0gc3QgPD0gMCA/IDAgOiBzdDtcblxuICAgIG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGVudHJpZXMgPT4ge1xuICAgICAgICBlbnRyaWVzLmZvckVhY2goZW50cnkgPT57XG4gICAgICAgICAgICBpZihlbnRyeS5pc0ludGVyc2VjdGluZyl7XG4gICAgICAgICAgICAgICAgbGV0IG1pblRvcCA9cGFyc2VGbG9hdChlbnRyeS50YXJnZXQuZGF0YXNldC5taW50b3ApXG4gICAgICAgICAgICAgICAgbGV0IG1heFRvcCA9IHBhcnNlRmxvYXQoZW50cnkudGFyZ2V0LmRhdGFzZXQubWF4dG9wKVxuICAgICAgICAgICAgICAgIGxldCBzcGVlZCA9IGVudHJ5LnRhcmdldC5kYXRhc2V0LnNwZWVkXG4gICAgICAgICAgICAgICAgbGV0IHBvc1kgPSBlbnRyeS5ib3VuZGluZ0NsaWVudFJlY3QueVxuICAgICAgICAgICAgICAgIGxldCBuZXdZID0gcG9zWSAqIHZhbHVlICogc3BlZWRcblxuICAgICAgICAgICAgICAgIGVudHJ5LnRhcmdldC5zdHlsZS5vcGFjaXR5ID0gXCIxXCI7XG5cbiAgICAgICAgICAgICAgICBpZihzY3JvbGxVcCl7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIChuZXdZIDw9IG1pblRvcCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRyeS50YXJnZXQuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGVZKFwiKyBuZXdZICtcInB4KVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy99XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIChuZXdZID49IG1heFRvcCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRyeS50YXJnZXQuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGVZKFwiKyBuZXdZICtcInB4KVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy99XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbm90IGludGVyc2VjdGluZycpXG4gICAgICAgICAgICAgICAgZW50cnkudGFyZ2V0LnN0eWxlLm9wYWNpdHkgPSBcIjBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KVxuXG4gICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShpdGVtKVxuICAgIH0pXG59LCBmYWxzZSlcblxuXG4iXSwibmFtZXMiOlsic29jaWFsQnV0dG9ucyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImVuY29kZVN0cmluZyIsInN0cmluZyIsImVuY29kZVVSSUNvbXBvbmVudCIsInJlcGxhY2UiLCJmb3JFYWNoIiwiZWwiLCJhZGRFdmVudExpc3RlbmVyIiwicXVlcnlTZWxlY3RvciIsInN0eWxlIiwiZGlzcGxheSIsIm1vZGlmaWVkVXJsIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwibW9kaWZpZWRUaXRsZSIsImNvbmZpZyIsImxpbmtlZGluU2hhcmVVcmwiLCJ0d2l0dGVyU2hhcmVVcmwiLCJibHVlc2t5U2hhcmVVcmwiLCJ0ZWRkeVNoYXBlIiwiY29uZmV0dGkiLCJzaGFwZUZyb21UZXh0IiwidGV4dCIsInNjYWxhciIsImZpcmVDb25mZXR0aUF0IiwieCIsInkiLCJwYXJ0aWNsZUNvdW50Iiwic3ByZWFkIiwib3JpZ2luIiwic2hhcGVzIiwiYnRuIiwiZSIsImNsaWVudFgiLCJpbm5lcldpZHRoIiwiY2xpZW50WSIsImlubmVySGVpZ2h0IiwiY29uc29sZSIsImxvZyIsInJlY3QiLCJ0YXJnZXQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJsZWZ0Iiwid2lkdGgiLCJ0b3AiLCJoZWlnaHQiLCJyZXNldFBvc2l0aW9uIiwidHJhbnNmb3JtIiwic2V0QXR0cmlidXRlIiwidHJhbnNpdGlvbiIsInNldFRpbWVvdXQiLCJnYW1lRWwiLCJpbmRleCIsImRhdGFzZXQiLCJnYW1lSWQiLCJpbnRlcmFjdCIsImRyYWdnYWJsZSIsImluZXJ0aWEiLCJhdXRvU2Nyb2xsIiwibW9kaWZpZXJzIiwicmVzdHJpY3RSZWN0IiwicmVzdHJpY3Rpb24iLCJlbmRPbmx5IiwibGlzdGVuZXJzIiwibW92ZSIsImV2ZW50IiwicGFyc2VGbG9hdCIsImdldEF0dHJpYnV0ZSIsImR4IiwiZHkiLCJlbmQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImRyb3B6b25lIiwiYWNjZXB0Iiwib3ZlcmxhcCIsIm9uZHJhZ2VudGVyIiwiYmFja2dyb3VuZCIsIm9uZHJhZ2xlYXZlIiwib25kcm9wIiwicmVsYXRlZFRhcmdldCIsImRyYWdJZCIsImlkIiwiYWNjZXB0SWQiLCJhZGQiLCJhcHBlbmRDaGlsZCIsImxhYmVsIiwiaW5uZXJUZXh0IiwicG9pbnRlckV2ZW50cyIsImV2ZXJ5Iiwiem9uZSIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImJ1YmJsZXMiLCJjaGVja0lmR2FtZUZpbmlzaGVkIiwicmVtb3ZlIiwic2V0dXBNaXhBbmRNYXRjaEdhbWUiLCJlbGVtZW50cyIsInNlbGVjdG9yIiwiY29uY2F0IiwiQXJyYXkiLCJmcm9tIiwic3RpY2t5Qml0cyIsInN0aWNreUJpdFN0aWNreU9mZnNldCIsImQzIiwiZWFjaCIsImQiLCJpIiwiY29sbGFwc2VDb250ZW50IiwidGhpcyIsInNlbGVjdCIsImNvbGxhcHNlTWVudSIsIm9uIiwiY2xhc3NlZCIsIkxhenlMb2FkIiwiZWxlbWVudHNfc2VsZWN0b3IiLCJ0aHJlc2hvbGQiLCJjYXJvdXNlbCIsImNvbnRhaW5lciIsImNhcHRpb24iLCJmaWd1cmVzIiwicHJldmlvdXNCdXR0b24iLCJuZXh0QnV0dG9uIiwiaW5kZXhUZXh0IiwiY2FwdGlvblRleHQiLCJ1cGRhdGUiLCJpdGVtIiwiZGlzYWJsZWQiLCJsZW5ndGgiLCJpbm5lckhUTUwiLCJmaWd1cmUiLCJvYnNlcnZlciIsIml0ZW1zIiwibGFzdFNjcm9sbFRvcCIsInBhZ2VZT2Zmc2V0IiwiZG9jdW1lbnRFbGVtZW50Iiwic2Nyb2xsVG9wIiwic2Nyb2xsVXAiLCJ2YWx1ZSIsInNjcm9sbFkiLCJzdCIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwiZW50cmllcyIsImVudHJ5IiwiaXNJbnRlcnNlY3RpbmciLCJtaW50b3AiLCJtYXh0b3AiLCJzcGVlZCIsIm5ld1kiLCJib3VuZGluZ0NsaWVudFJlY3QiLCJvcGFjaXR5Iiwib2JzZXJ2ZSJdLCJzb3VyY2VSb290IjoiIn0=