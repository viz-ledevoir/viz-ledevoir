(self.webpackChunkscrollytelling_template=self.webpackChunkscrollytelling_template||[]).push([[792],{94871:(e,t,r)=>{"use strict";var a=r(19904),o=r(19313),n=r(84144),l=r.n(n);const s=JSON.parse('{"DD":"Du teddy bear au Labubu: comment lâ€™ourson en peluche a-t-il traversÃ© les Ã©poques?"}');let c=document.querySelectorAll(".social-buttons .svg");function i(e){return encodeURIComponent(e).replace(/%20/g,"+")}c.forEach((e=>{e.addEventListener("mouseover",(()=>{e.querySelector(".normal").style.display="none",e.querySelector(".hover").style.display="block"}))})),c.forEach((e=>{e.addEventListener("mouseout",(()=>{e.querySelector(".normal").style.display="block",e.querySelector(".hover").style.display="none"}))}));const d=i(window.location.href),u=i(s.DD),p=`https://www.linkedin.com/sharing/share-offsite/?url=${d}`,y=`https://twitter.com/intent/tweet?text=${u}+${d}`,m=`https://bsky.app/intent/compose?text=${u}+${d}`;document.querySelector(".linkedin").href=p,document.querySelector(".twitter").href=y,document.querySelector(".bluesky").href=m,r(66314),r(12453);var g=r(14685);const f=g.A.shapeFromText({text:"ðŸ§¸",scalar:2.5});document.addEventListener("mixmatch:completed",(e=>{console.log("event for mix");const t=e.target.getBoundingClientRect();var r,a;r=(t.left+t.width/2)/window.innerWidth,a=(t.top+t.height/2)/window.innerHeight,(0,g.A)({particleCount:80,spread:60,origin:{x:r,y:a}}),(0,g.A)({particleCount:20,spread:60,origin:{x:r,y:a},shapes:[f],scalar:2.5})}));var h=r(82617),b=r.n(h);function v(e){e.style.transform="translate(0px, 0px)",e.setAttribute("data-x",0),e.setAttribute("data-y",0),e.style.transition="transform 0.25s",setTimeout((()=>e.style.transition=""),300)}document.querySelectorAll(".mixAndMatch").forEach(((e,t)=>{e.dataset.gameId=`game-${t}`,function(e){const t=e.dataset.gameId;e.querySelectorAll(".draggable").forEach((e=>{e.style.transform="translate(0px, 0px)",e.setAttribute("data-x",0),e.setAttribute("data-y",0)})),b()(`[data-game-id="${t}"] .draggable`).draggable({inertia:!0,autoScroll:!1,modifiers:[b().modifiers.restrictRect({restriction:e,endOnly:!0})],listeners:{move(e){const t=e.target;let r=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,a=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.transform=`translate(${r}px, ${a}px)`,t.setAttribute("data-x",r),t.setAttribute("data-y",a)},end(e){const t=e.target;t.classList.contains("dropped")||v(t)}}}),b()(`[data-game-id="${t}"] .dropzone`).dropzone({accept:`[data-game-id="${t}"] .draggable`,overlap:.5,ondragenter(e){e.target.style.background="#c8f7c5"},ondragleave(e){e.target.style.background="#fffa"},ondrop(t){const r=t.relatedTarget,a=t.target,o=r.dataset.id,n=a.dataset.accept;if(a.style.background="#fffa",o===n){r.classList.add("dropped"),r.style.transform="translate(0px, 0px)",r.setAttribute("data-x",0),r.setAttribute("data-y",0),a.appendChild(r);const t=a.querySelector(".drop-label");t&&(t.innerText=""),a.style.pointerEvents="none",function(e){[...e.querySelectorAll(".dropzone")].every((e=>"none"===e.style.pointerEvents))&&(console.log("game "),e.dispatchEvent(new CustomEvent("mixmatch:completed",{bubbles:!0})))}(e)}else r.classList.remove("dropped"),v(r)}})}(e)}));let w=[];[".viz",".full-page-section > img",".full-page-section > video"].forEach((e=>{w=w.concat(Array.from(document.querySelectorAll(e)))})),(0,a.A)(w,{stickyBitStickyOffset:40}),o.Ubm("#collapseElement").each((function(e,t){const r=o.Ltv(this).select("#collapseContent"),a=o.Ltv(this).select("#collapseMenu");a.select("button").on("click",(()=>{r.classed("show-content",!r.classed("show-content"))})),a.select("#collapseMenuText").on("click",(()=>{r.classed("show-content",!r.classed("show-content"))}))})),new(l())({elements_selector:".lazy",threshold:500})},66314:()=>{document.querySelectorAll(".carousel").forEach((e=>{let t=0;const r=e.querySelector(".carousel-items"),a=e.querySelector(".carousel-caption"),o=r.querySelectorAll("figure"),n=a.querySelector(".previous"),l=a.querySelector(".next"),s=a.querySelector(".index"),c=a.querySelector(".text");function i(e){o.item(t).classList.remove("active"),t=e,r.style.left=100*-t+"%",o.item(t).classList.add("active"),n.disabled=0===t,l.disabled=t===o.length-1,s.innerHTML=`${t+1} / ${o.length}`,c.innerHTML=o.item(t).querySelector("figcaption").innerHTML}r.style.width=100*o.length+"%",i(t),o.forEach(((e,r)=>{e.addEventListener("click",(e=>{r!==t&&i(r)}))})),n.addEventListener("click",(()=>{t<=0||i(t-1)})),l.addEventListener("click",(()=>{t>=o.length-1||i(t+1)}))}))},12453:()=>{let e,t=document.querySelectorAll(".items");var r=window.pageYOffset||document.documentElement.scrollTop;let a;window.addEventListener("scroll",(()=>{let o=window.scrollY,n=window.pageYOffset||document.documentElement.scrollTop;n>r?a=!1:n<r&&(a=!0),r=n<=0?0:n,e=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){parseFloat(e.target.dataset.mintop),parseFloat(e.target.dataset.maxtop);let t=e.target.dataset.speed,r=e.boundingClientRect.y*o*t;e.target.style.opacity="1",e.target.style.transform="translateY("+r+"px)"}else e.target.style.opacity="0"}))})),t.forEach((t=>{e.observe(t)}))}),!1)}},e=>{var t=t=>e(e.s=t);e.O(0,[96],(()=>(t(84315),t(7452),t(94871)))),e.O()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T3FCLFFBQVE2RixRQUQ3QyxJQUVJQyxFQUFRSixFQUFNL0csT0FBT3FCLFFBQVE4RixNQUU3QkMsRUFET0wsRUFBTU0sbUJBQW1CbEgsRUFDbEJ1RyxFQUFRUyxFQUUxQkosRUFBTS9HLE9BQU9wQixNQUFNMEksUUFBVSxJQUlyQlAsRUFBTS9HLE9BQU9wQixNQUFNbUMsVUFBWSxjQUFlcUcsRUFBTSxLQVVoRSxNQUVJTCxFQUFNL0csT0FBT3BCLE1BQU0wSSxRQUFVLEdBQ2pDLEdBQ0YsSUFHTmxCLEVBQU01SCxTQUFRc0gsSUFDVkssRUFBU29CLFFBQVF6QixFQUFLLEdBQ3hCLElBQ0gsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9zZXRVcC9zb2NpYWxNZWRpYUhlYWRlci5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvc2VjdGlvbkNvbXBvbmVudHMvY29uZmV0dGkuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL3NlY3Rpb25Db21wb25lbnRzL21peEFuZE1hdGNoLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9hcHAuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL3NlY3Rpb25Db21wb25lbnRzL2NvbGxhcHNlSXRlbS5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvc2VjdGlvbkNvbXBvbmVudHMvY2Fyb3VzZWwuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL3NlY3Rpb25Db21wb25lbnRzL3BhcmFsYXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogSU1QT1JUUyAqL1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi8uLi9jb25maWcuanNvbic7XG5cblxuLy9BZGQgSG92ZXIgZWZmZWN0IG9uIHNvY2lhbCBidXR0b25zXG5sZXQgc29jaWFsQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc29jaWFsLWJ1dHRvbnMgLnN2Z1wiKVxuXG4vL0Rpc3BsYXkgaG92ZXIgc3ZnXG5zb2NpYWxCdXR0b25zLmZvckVhY2goZWwgPT4ge1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgKCkgPT4ge1xuXG4gICAgICAgIGVsLnF1ZXJ5U2VsZWN0b3IoXCIubm9ybWFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuICAgICAgICBlbC5xdWVyeVNlbGVjdG9yKFwiLmhvdmVyXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCJcbiAgICB9KVxufSlcbi8vSGlkZSBob3ZlciBzdmdcbnNvY2lhbEJ1dHRvbnMuZm9yRWFjaChlbCA9PiB7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsICgpID0+IHtcblxuICAgICAgICBlbC5xdWVyeVNlbGVjdG9yKFwiLm5vcm1hbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiXG4gICAgICAgIGVsLnF1ZXJ5U2VsZWN0b3IoXCIuaG92ZXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXG4gICAgfSlcbn0pXG5cblxuLy9GdW5jdGlvbiB0aGF0IGVuY29kZXMgc3RyaW5nIGFuZCByZXBsYWNlcyBzcGFjZXMgYnkgK1xuZnVuY3Rpb24gZW5jb2RlU3RyaW5nKHN0cmluZykge1xuICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5nKS5yZXBsYWNlKC8lMjAvZywgJysnKTtcbn1cblxuY29uc3QgbW9kaWZpZWRVcmwgPSBlbmNvZGVTdHJpbmcod2luZG93LmxvY2F0aW9uLmhyZWYpXG5jb25zdCBtb2RpZmllZFRpdGxlID0gZW5jb2RlU3RyaW5nKGNvbmZpZy50aXRsZSlcblxuLy9CdWlsZCB0aGUgc29jaWFsIG1lZGlhIHNoYXJpbmcgVVJMXG5jb25zdCBsaW5rZWRpblNoYXJlVXJsID0gYGh0dHBzOi8vd3d3LmxpbmtlZGluLmNvbS9zaGFyaW5nL3NoYXJlLW9mZnNpdGUvP3VybD0ke21vZGlmaWVkVXJsfWA7XG5jb25zdCB0d2l0dGVyU2hhcmVVcmwgPSBgaHR0cHM6Ly90d2l0dGVyLmNvbS9pbnRlbnQvdHdlZXQ/dGV4dD0ke21vZGlmaWVkVGl0bGV9KyR7bW9kaWZpZWRVcmx9YDtcbmNvbnN0IGJsdWVza3lTaGFyZVVybCA9IGBodHRwczovL2Jza3kuYXBwL2ludGVudC9jb21wb3NlP3RleHQ9JHttb2RpZmllZFRpdGxlfSske21vZGlmaWVkVXJsfWBcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpbmtlZGluJykuaHJlZiA9IGxpbmtlZGluU2hhcmVVcmw7XG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnR3aXR0ZXJcIikuaHJlZiA9IHR3aXR0ZXJTaGFyZVVybDtcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYmx1ZXNreVwiKS5ocmVmID0gYmx1ZXNreVNoYXJlVXJsOyIsImltcG9ydCBjb25mZXR0aSBmcm9tIFwiY2FudmFzLWNvbmZldHRpXCI7XG5cbi8vIENyZWF0ZSB0aGUgZW1vamkgc2hhcGUgb25jZVxuY29uc3Qgc2NhbGFyID0gMi41O1xuY29uc3QgdGVkZHlTaGFwZSA9IGNvbmZldHRpLnNoYXBlRnJvbVRleHQoeyB0ZXh0OiBcIvCfp7hcIiwgc2NhbGFyIH0pO1xuXG4vLyBCdXJzdCBmdW5jdGlvbiB1c2VkIGZvciBib3RoIGNsaWNrIGFuZCBtaXhNYXRjaFxuZnVuY3Rpb24gZmlyZUNvbmZldHRpQXQoeCwgeSkge1xuICBjb25mZXR0aSh7XG4gICAgcGFydGljbGVDb3VudDogODAsXG4gICAgc3ByZWFkOiA2MCxcbiAgICBvcmlnaW46IHsgeCwgeSB9XG4gIH0pO1xuXG4gIGNvbmZldHRpKHtcbiAgICBwYXJ0aWNsZUNvdW50OiAyMCxcbiAgICBzcHJlYWQ6IDYwLFxuICAgIG9yaWdpbjogeyB4LCB5IH0sXG4gICAgc2hhcGVzOiBbdGVkZHlTaGFwZV0sXG4gICAgc2NhbGFyXG4gIH0pO1xufVxuXG4vLyBFeGlzdGluZyBsb2dpYyAoY2xpY2sgY29uZmV0dGkpXG4vLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFuc3dlclR5cGUuYWN0aXZlXCIpLmZvckVhY2goYnRuID0+IHtcbi8vICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuLy8gICAgIGxldCB4ID0gZS5jbGllbnRYIC8gd2luZG93LmlubmVyV2lkdGg7XG4vLyAgICAgbGV0IHkgPSBlLmNsaWVudFkgLyB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4vLyAgICAgZmlyZUNvbmZldHRpQXQoeCwgeSk7XG4vLyAgIH0pO1xuLy8gfSk7XG5cbi8vIE5FVzogTGlzdGVuIGZvciBNaXggJiBNYXRjaCBjb21wbGV0aW9uXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibWl4bWF0Y2g6Y29tcGxldGVkXCIsIChlKSA9PiB7XG4gIGNvbnNvbGUubG9nKFwiZXZlbnQgZm9yIG1peFwiKVxuICBjb25zdCBnYW1lRWwgPSBlLnRhcmdldDtcbiAgY29uc3QgcmVjdCA9IGdhbWVFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAvLyBmaXJlIGNvbmZldHRpIGZyb20gY2VudGVyIG9mIHRoZSBnYW1lXG4gIGNvbnN0IHggPSAocmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDIpIC8gd2luZG93LmlubmVyV2lkdGg7XG4gIGNvbnN0IHkgPSAocmVjdC50b3AgKyByZWN0LmhlaWdodCAvIDIpIC8gd2luZG93LmlubmVySGVpZ2h0O1xuXG4gIGZpcmVDb25mZXR0aUF0KHgsIHkpO1xufSk7XG4iLCJpbXBvcnQgaW50ZXJhY3QgZnJvbSBcImludGVyYWN0anNcIjtcblxuLy8gSW5pdGlhbGl6ZSBlYWNoIGdhbWUgc2VwYXJhdGVseVxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5taXhBbmRNYXRjaFwiKS5mb3JFYWNoKChnYW1lRWwsIGluZGV4KSA9PiB7XG4gIFxuICAvLyBHaXZlIGVhY2ggaW5zdGFuY2UgYSB1bmlxdWUgYXR0cmlidXRlIGZvciBzY29waW5nXG4gIGdhbWVFbC5kYXRhc2V0LmdhbWVJZCA9IGBnYW1lLSR7aW5kZXh9YDtcblxuICBzZXR1cE1peEFuZE1hdGNoR2FtZShnYW1lRWwpO1xufSk7XG5cbmZ1bmN0aW9uIHNldHVwTWl4QW5kTWF0Y2hHYW1lKGdhbWVFbCkge1xuXG4gIGNvbnN0IGdhbWVJZCA9IGdhbWVFbC5kYXRhc2V0LmdhbWVJZDtcblxuICAvLyBTYXZlIG9yaWdpbmFsIHBvc2l0aW9uc1xuICBnYW1lRWwucXVlcnlTZWxlY3RvckFsbChcIi5kcmFnZ2FibGVcIikuZm9yRWFjaChlbCA9PiB7XG4gICAgZWwuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUoMHB4LCAwcHgpXCI7XG4gICAgZWwuc2V0QXR0cmlidXRlKFwiZGF0YS14XCIsIDApO1xuICAgIGVsLnNldEF0dHJpYnV0ZShcImRhdGEteVwiLCAwKTtcbiAgfSk7XG5cbiAgLy8gTWFrZSBpdGVtcyBkcmFnZ2FibGUgZm9yICp0aGlzKiBnYW1lXG4gIGludGVyYWN0KGBbZGF0YS1nYW1lLWlkPVwiJHtnYW1lSWR9XCJdIC5kcmFnZ2FibGVgKS5kcmFnZ2FibGUoe1xuICAgIGluZXJ0aWE6IHRydWUsXG4gICAgYXV0b1Njcm9sbDogZmFsc2UsXG5cbiAgICBtb2RpZmllcnM6IFtcbiAgICAgICAgaW50ZXJhY3QubW9kaWZpZXJzLnJlc3RyaWN0UmVjdCh7XG4gICAgICAgICAgcmVzdHJpY3Rpb246IGdhbWVFbCwgICAgLy8gcmVzdHJpY3QgdG8gVEhJUyBzcGVjaWZpYyBnYW1lXG4gICAgICAgICAgZW5kT25seTogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgXSxcblxuICAgIGxpc3RlbmVyczoge1xuICAgICAgbW92ZShldmVudCkge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG5cbiAgICAgICAgbGV0IHggPSAocGFyc2VGbG9hdCh0YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS14XCIpKSB8fCAwKSArIGV2ZW50LmR4O1xuICAgICAgICBsZXQgeSA9IChwYXJzZUZsb2F0KHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXlcIikpIHx8IDApICsgZXZlbnQuZHk7XG5cbiAgICAgICAgdGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHt4fXB4LCAke3l9cHgpYDtcbiAgICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZShcImRhdGEteFwiLCB4KTtcbiAgICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZShcImRhdGEteVwiLCB5KTtcbiAgICAgIH0sXG5cbiAgICAgIGVuZChldmVudCkge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImRyb3BwZWRcIikpIHtcbiAgICAgICAgICByZXNldFBvc2l0aW9uKHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8vIERyb3B6b25lcyBmb3IgKnRoaXMqIGdhbWVcbiAgaW50ZXJhY3QoYFtkYXRhLWdhbWUtaWQ9XCIke2dhbWVJZH1cIl0gLmRyb3B6b25lYCkuZHJvcHpvbmUoe1xuICAgIGFjY2VwdDogYFtkYXRhLWdhbWUtaWQ9XCIke2dhbWVJZH1cIl0gLmRyYWdnYWJsZWAsXG4gICAgb3ZlcmxhcDogMC41LFxuXG4gICAgb25kcmFnZW50ZXIoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gXCIjYzhmN2M1XCI7XG4gICAgfSxcblxuICAgIG9uZHJhZ2xlYXZlKGV2ZW50KSB7XG4gICAgICBldmVudC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwiI2ZmZmFcIjtcbiAgICB9LFxuXG4gICAgb25kcm9wKGV2ZW50KSB7XG4gICAgICBjb25zdCBkcmFnZ2FibGUgPSBldmVudC5yZWxhdGVkVGFyZ2V0O1xuICAgICAgY29uc3QgZHJvcHpvbmUgPSBldmVudC50YXJnZXQ7XG5cbiAgICAgIGNvbnN0IGRyYWdJZCA9IGRyYWdnYWJsZS5kYXRhc2V0LmlkO1xuICAgICAgY29uc3QgYWNjZXB0SWQgPSBkcm9wem9uZS5kYXRhc2V0LmFjY2VwdDtcblxuICAgICAgZHJvcHpvbmUuc3R5bGUuYmFja2dyb3VuZCA9IFwiI2ZmZmFcIjtcblxuICAgICAgaWYgKGRyYWdJZCA9PT0gYWNjZXB0SWQpIHtcbiAgICAgICAgZHJhZ2dhYmxlLmNsYXNzTGlzdC5hZGQoXCJkcm9wcGVkXCIpO1xuXG4gICAgICAgIGRyYWdnYWJsZS5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZSgwcHgsIDBweClcIjtcbiAgICAgICAgZHJhZ2dhYmxlLnNldEF0dHJpYnV0ZShcImRhdGEteFwiLCAwKTtcbiAgICAgICAgZHJhZ2dhYmxlLnNldEF0dHJpYnV0ZShcImRhdGEteVwiLCAwKTtcblxuICAgICAgICBkcm9wem9uZS5hcHBlbmRDaGlsZChkcmFnZ2FibGUpO1xuXG4gICAgICAgIGNvbnN0IGxhYmVsID0gZHJvcHpvbmUucXVlcnlTZWxlY3RvcihcIi5kcm9wLWxhYmVsXCIpO1xuICAgICAgICBpZiAobGFiZWwpIHtcbiAgICAgICAgICAgIGxhYmVsLmlubmVyVGV4dCA9IFwiXCJcbiAgICAgICAgfVxuXG4gICAgICAgIGRyb3B6b25lLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIm5vbmVcIjtcblxuICAgICAgICAvLyDirZAgQ0hFQ0sgSUYgR0FNRSBJUyBDT01QTEVURUQgQkVGT1JFIEZJUklORyBFVkVOVFxuICAgICAgICBjaGVja0lmR2FtZUZpbmlzaGVkKGdhbWVFbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkcmFnZ2FibGUuY2xhc3NMaXN0LnJlbW92ZShcImRyb3BwZWRcIik7XG4gICAgICAgIHJlc2V0UG9zaXRpb24oZHJhZ2dhYmxlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuXG4vLyDwn46vIENoZWNrcyBpZiB0aGUgZ2FtZSBpcyBjb21wbGV0ZVxuZnVuY3Rpb24gY2hlY2tJZkdhbWVGaW5pc2hlZChnYW1lRWwpIHtcbiAgICBjb25zdCBkcm9wem9uZXMgPSBnYW1lRWwucXVlcnlTZWxlY3RvckFsbChcIi5kcm9wem9uZVwiKTtcbiAgXG4gICAgY29uc3QgYWxsQ29tcGxldGVkID0gWy4uLmRyb3B6b25lc10uZXZlcnkoem9uZSA9PlxuICAgICAgem9uZS5zdHlsZS5wb2ludGVyRXZlbnRzID09PSBcIm5vbmVcIlxuICAgICk7XG4gIFxuICAgIGlmIChhbGxDb21wbGV0ZWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiZ2FtZSBcIilcbiAgICAgIGdhbWVFbC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcIm1peG1hdGNoOmNvbXBsZXRlZFwiLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xuICAgIH1cbiAgfVxuXG5mdW5jdGlvbiByZXNldFBvc2l0aW9uKGVsKSB7XG4gIGVsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlKDBweCwgMHB4KVwiO1xuICBlbC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXhcIiwgMCk7XG4gIGVsLnNldEF0dHJpYnV0ZShcImRhdGEteVwiLCAwKTtcblxuICBlbC5zdHlsZS50cmFuc2l0aW9uID0gXCJ0cmFuc2Zvcm0gMC4yNXNcIjtcbiAgc2V0VGltZW91dCgoKSA9PiAoZWwuc3R5bGUudHJhbnNpdGlvbiA9IFwiXCIpLCAzMDApO1xufVxuIiwiLyoqXG4gKiBhcHAuanNcbiAqID09PT09PVxuICogTWFpbiBmaWxlIG9mIHRoZSBhcHBsaWNhdGlvbi4gVGhpcyBmaWxlIGlzIHVzZWQgdG8gaW5pdGlhbGl6ZSB0aGUgc2Nyb2xsZXIgYW5kIGltcG9ydHMgdGhlIHZpc3VhbGl6YXRpb25zIHVzZWQuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgJy4uL2Fzc2V0cy9zdHlsZXMvc3R5bGUuc2Nzcyc7XG5cbmNvbnN0IGhlYWRlckhlaWdodCA9IDQwO1xuaW1wb3J0IHN0aWNreUJpdHMgZnJvbSAnc3RpY2t5Yml0cydcblxubGV0IGVsZW1lbnRzID0gW107XG5bJy52aXonLCAnLmZ1bGwtcGFnZS1zZWN0aW9uID4gaW1nJywgJy5mdWxsLXBhZ2Utc2VjdGlvbiA+IHZpZGVvJ10uZm9yRWFjaChzZWxlY3RvciA9PiB7XG4gIGVsZW1lbnRzID0gZWxlbWVudHMuY29uY2F0KEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpKTtcbn0pO1xuc3RpY2t5Qml0cyhlbGVtZW50cywgeyBzdGlja3lCaXRTdGlja3lPZmZzZXQ6IGhlYWRlckhlaWdodCB9KTtcblxuaW1wb3J0IHsgaW5pdGlhbGl6ZSBhcyB2MSB9IGZyb20gJy4vc2VjdGlvbkNvbXBvbmVudHMvdml6JztcbmltcG9ydCB7IHNjcm9sbGVyIH0gZnJvbSAnLi9zZXRVcC9zY3JvbGxlcic7XG5pbXBvcnQgTGF6eUxvYWQgZnJvbSBcInZhbmlsbGEtbGF6eWxvYWRcIjtcbmltcG9ydCAnLi9zZXRVcC9zb2NpYWxNZWRpYUhlYWRlcidcblxuaW1wb3J0IHsgY29sbGFwc2VJdGVtIH0gZnJvbSBcIi4vc2VjdGlvbkNvbXBvbmVudHMvY29sbGFwc2VJdGVtXCI7XG5pbXBvcnQgJy4vc2VjdGlvbkNvbXBvbmVudHMvY2Fyb3VzZWwnO1xuaW1wb3J0ICcuL3NlY3Rpb25Db21wb25lbnRzL3BhcmFsYXgnO1xuaW1wb3J0ICcuL3NlY3Rpb25Db21wb25lbnRzL2NvbmZldHRpJztcbmltcG9ydCAnLi9zZWN0aW9uQ29tcG9uZW50cy9taXhBbmRNYXRjaCc7XG5cbmNvbGxhcHNlSXRlbSgpXG5cblxuY29uc3QgbGwgPSBuZXcgTGF6eUxvYWQoe1xuICBlbGVtZW50c19zZWxlY3RvcjogXCIubGF6eVwiLFxuICB0aHJlc2hvbGQ6IDUwMFxufSk7XG5cbiIsImltcG9ydCAqIGFzIGQzIGZyb20gXCJkM1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gY29sbGFwc2VJdGVtKCkge1xuICBjb25zdCBhbGxDb2xsYXBzZUVsZW0gPSBkMy5zZWxlY3RBbGwoXCIjY29sbGFwc2VFbGVtZW50XCIpO1xuXG4gIGFsbENvbGxhcHNlRWxlbS5lYWNoKGZ1bmN0aW9uIChkLCBpKSB7XG4gICAgY29uc3QgY29sbGFwc2VDb250ZW50ID0gZDMuc2VsZWN0KHRoaXMpXG4gICAgICAuc2VsZWN0KFwiI2NvbGxhcHNlQ29udGVudFwiKTtcblxuICAgIGNvbnN0IGNvbGxhcHNlTWVudSA9IGQzLnNlbGVjdCh0aGlzKVxuICAgICAgLnNlbGVjdChcIiNjb2xsYXBzZU1lbnVcIik7XG5cbiAgICBjb2xsYXBzZU1lbnUuc2VsZWN0KFwiYnV0dG9uXCIpXG4gICAgICAub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjb2xsYXBzZUNvbnRlbnQuY2xhc3NlZCgnc2hvdy1jb250ZW50JywgIWNvbGxhcHNlQ29udGVudC5jbGFzc2VkKCdzaG93LWNvbnRlbnQnKSk7XG4gICAgICB9KTtcblxuICAgIGNvbGxhcHNlTWVudS5zZWxlY3QoXCIjY29sbGFwc2VNZW51VGV4dFwiKVxuICAgICAgLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY29sbGFwc2VDb250ZW50LmNsYXNzZWQoJ3Nob3ctY29udGVudCcsICFjb2xsYXBzZUNvbnRlbnQuY2xhc3NlZCgnc2hvdy1jb250ZW50JykpO1xuICAgICAgfSk7XG4gIH0pO1xufSIsImRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJvdXNlbCcpLmZvckVhY2goY2Fyb3VzZWwgPT4ge1xuICBsZXQgaW5kZXggID0gMDtcblxuICBjb25zdCBjb250YWluZXIgPSBjYXJvdXNlbC5xdWVyeVNlbGVjdG9yKCcuY2Fyb3VzZWwtaXRlbXMnKTtcbiAgY29uc3QgY2FwdGlvbiA9IGNhcm91c2VsLnF1ZXJ5U2VsZWN0b3IoJy5jYXJvdXNlbC1jYXB0aW9uJyk7XG5cbiAgY29uc3QgZmlndXJlcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdmaWd1cmUnKTtcbiAgY29uc3QgcHJldmlvdXNCdXR0b24gPSBjYXB0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5wcmV2aW91cycpO1xuICBjb25zdCBuZXh0QnV0dG9uID0gY2FwdGlvbi5xdWVyeVNlbGVjdG9yKCcubmV4dCcpO1xuXG4gIGNvbnN0IGluZGV4VGV4dCA9IGNhcHRpb24ucXVlcnlTZWxlY3RvcignLmluZGV4Jyk7XG4gIGNvbnN0IGNhcHRpb25UZXh0ID0gY2FwdGlvbi5xdWVyeVNlbGVjdG9yKCcudGV4dCcpO1xuXG4gIGNvbnRhaW5lci5zdHlsZS53aWR0aCA9IGAke2ZpZ3VyZXMubGVuZ3RoICogMTAwfSVgO1xuICB1cGRhdGUoaW5kZXgpO1xuXG4gIGZpZ3VyZXMuZm9yRWFjaCgoZmlndXJlLCBpKSA9PiB7XG4gICAgZmlndXJlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICBpZiAoaSA9PT0gaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdXBkYXRlKGkpO1xuICAgIH0pO1xuICB9KTtcblxuICBwcmV2aW91c0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBpZiAoaW5kZXggPD0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB1cGRhdGUoaW5kZXggLSAxKTtcbiAgfSk7XG5cbiAgbmV4dEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBpZiAoaW5kZXggPj0gZmlndXJlcy5sZW5ndGggLSAxKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHVwZGF0ZShpbmRleCArIDEpO1xuICB9KTtcblxuICBmdW5jdGlvbiB1cGRhdGUoaSkge1xuICAgIGZpZ3VyZXMuaXRlbShpbmRleCkuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgaW5kZXggPSBpO1xuICAgIGNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gYCR7LWluZGV4ICogMTAwfSVgO1xuICAgIGZpZ3VyZXMuaXRlbShpbmRleCkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgcHJldmlvdXNCdXR0b24uZGlzYWJsZWQgPSBpbmRleCA9PT0gMDtcbiAgICBuZXh0QnV0dG9uLmRpc2FibGVkID0gaW5kZXggPT09IGZpZ3VyZXMubGVuZ3RoIC0gMTtcbiAgICBpbmRleFRleHQuaW5uZXJIVE1MID0gYCR7aW5kZXggKyAxfSAvICR7ZmlndXJlcy5sZW5ndGh9YDtcbiAgICBjYXB0aW9uVGV4dC5pbm5lckhUTUwgPSBmaWd1cmVzLml0ZW0oaW5kZXgpLnF1ZXJ5U2VsZWN0b3IoJ2ZpZ2NhcHRpb24nKS5pbm5lckhUTUw7XG4gIH1cbn0pO1xuIiwibGV0IGl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pdGVtc1wiKVxubGV0IG9ic2VydmVyO1xudmFyIGxhc3RTY3JvbGxUb3AgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcbmxldCBzY3JvbGxVcDtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgKCk9PntcbiAgICBsZXQgdmFsdWUgPSB3aW5kb3cuc2Nyb2xsWVxuICAgIGxldCBzdCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuICAgIFxuXG4gICAgaWYgKHN0ID4gbGFzdFNjcm9sbFRvcCl7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJzY3JvbGxpbmcgZG93blwiKVxuICAgICAgICBzY3JvbGxVcCA9IGZhbHNlXG4gICB9ZWxzZSBpZiAoc3QgPCBsYXN0U2Nyb2xsVG9wKXtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcInNjcm9sbGluZyB1cFwiKVxuICAgICAgICBzY3JvbGxVcCA9IHRydWVcbiAgIH1cblxuICAgbGFzdFNjcm9sbFRvcCA9IHN0IDw9IDAgPyAwIDogc3Q7XG5cbiAgICBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihlbnRyaWVzID0+IHtcbiAgICAgICAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+e1xuICAgICAgICAgICAgaWYoZW50cnkuaXNJbnRlcnNlY3Rpbmcpe1xuICAgICAgICAgICAgICAgIGxldCBtaW5Ub3AgPXBhcnNlRmxvYXQoZW50cnkudGFyZ2V0LmRhdGFzZXQubWludG9wKVxuICAgICAgICAgICAgICAgIGxldCBtYXhUb3AgPSBwYXJzZUZsb2F0KGVudHJ5LnRhcmdldC5kYXRhc2V0Lm1heHRvcClcbiAgICAgICAgICAgICAgICBsZXQgc3BlZWQgPSBlbnRyeS50YXJnZXQuZGF0YXNldC5zcGVlZFxuICAgICAgICAgICAgICAgIGxldCBwb3NZID0gZW50cnkuYm91bmRpbmdDbGllbnRSZWN0LnlcbiAgICAgICAgICAgICAgICBsZXQgbmV3WSA9IHBvc1kgKiB2YWx1ZSAqIHNwZWVkXG5cbiAgICAgICAgICAgICAgICBlbnRyeS50YXJnZXQuc3R5bGUub3BhY2l0eSA9IFwiMVwiO1xuXG4gICAgICAgICAgICAgICAgaWYoc2Nyb2xsVXApe1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiAobmV3WSA8PSBtaW5Ub3Ape1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkudGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWShcIisgbmV3WSArXCJweClcIlxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiAobmV3WSA+PSBtYXhUb3Ape1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkudGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWShcIisgbmV3WSArXCJweClcIlxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vfVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ25vdCBpbnRlcnNlY3RpbmcnKVxuICAgICAgICAgICAgICAgIGVudHJ5LnRhcmdldC5zdHlsZS5vcGFjaXR5ID0gXCIwXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSlcblxuICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUoaXRlbSlcbiAgICB9KVxufSwgZmFsc2UpXG5cblxuIl0sIm5hbWVzIjpbInNvY2lhbEJ1dHRvbnMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbmNvZGVTdHJpbmciLCJzdHJpbmciLCJlbmNvZGVVUklDb21wb25lbnQiLCJyZXBsYWNlIiwiZm9yRWFjaCIsImVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJzdHlsZSIsImRpc3BsYXkiLCJtb2RpZmllZFVybCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsIm1vZGlmaWVkVGl0bGUiLCJjb25maWciLCJsaW5rZWRpblNoYXJlVXJsIiwidHdpdHRlclNoYXJlVXJsIiwiYmx1ZXNreVNoYXJlVXJsIiwidGVkZHlTaGFwZSIsImNvbmZldHRpIiwic2hhcGVGcm9tVGV4dCIsInRleHQiLCJzY2FsYXIiLCJlIiwiY29uc29sZSIsImxvZyIsInJlY3QiLCJ0YXJnZXQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ4IiwieSIsImxlZnQiLCJ3aWR0aCIsImlubmVyV2lkdGgiLCJ0b3AiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsInBhcnRpY2xlQ291bnQiLCJzcHJlYWQiLCJvcmlnaW4iLCJzaGFwZXMiLCJyZXNldFBvc2l0aW9uIiwidHJhbnNmb3JtIiwic2V0QXR0cmlidXRlIiwidHJhbnNpdGlvbiIsInNldFRpbWVvdXQiLCJnYW1lRWwiLCJpbmRleCIsImRhdGFzZXQiLCJnYW1lSWQiLCJpbnRlcmFjdCIsImRyYWdnYWJsZSIsImluZXJ0aWEiLCJhdXRvU2Nyb2xsIiwibW9kaWZpZXJzIiwicmVzdHJpY3RSZWN0IiwicmVzdHJpY3Rpb24iLCJlbmRPbmx5IiwibGlzdGVuZXJzIiwibW92ZSIsImV2ZW50IiwicGFyc2VGbG9hdCIsImdldEF0dHJpYnV0ZSIsImR4IiwiZHkiLCJlbmQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImRyb3B6b25lIiwiYWNjZXB0Iiwib3ZlcmxhcCIsIm9uZHJhZ2VudGVyIiwiYmFja2dyb3VuZCIsIm9uZHJhZ2xlYXZlIiwib25kcm9wIiwicmVsYXRlZFRhcmdldCIsImRyYWdJZCIsImlkIiwiYWNjZXB0SWQiLCJhZGQiLCJhcHBlbmRDaGlsZCIsImxhYmVsIiwiaW5uZXJUZXh0IiwicG9pbnRlckV2ZW50cyIsImV2ZXJ5Iiwiem9uZSIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImJ1YmJsZXMiLCJjaGVja0lmR2FtZUZpbmlzaGVkIiwicmVtb3ZlIiwic2V0dXBNaXhBbmRNYXRjaEdhbWUiLCJlbGVtZW50cyIsInNlbGVjdG9yIiwiY29uY2F0IiwiQXJyYXkiLCJmcm9tIiwic3RpY2t5Qml0cyIsInN0aWNreUJpdFN0aWNreU9mZnNldCIsImQzIiwiZWFjaCIsImQiLCJpIiwiY29sbGFwc2VDb250ZW50IiwidGhpcyIsInNlbGVjdCIsImNvbGxhcHNlTWVudSIsIm9uIiwiY2xhc3NlZCIsIkxhenlMb2FkIiwiZWxlbWVudHNfc2VsZWN0b3IiLCJ0aHJlc2hvbGQiLCJjYXJvdXNlbCIsImNvbnRhaW5lciIsImNhcHRpb24iLCJmaWd1cmVzIiwicHJldmlvdXNCdXR0b24iLCJuZXh0QnV0dG9uIiwiaW5kZXhUZXh0IiwiY2FwdGlvblRleHQiLCJ1cGRhdGUiLCJpdGVtIiwiZGlzYWJsZWQiLCJsZW5ndGgiLCJpbm5lckhUTUwiLCJmaWd1cmUiLCJvYnNlcnZlciIsIml0ZW1zIiwibGFzdFNjcm9sbFRvcCIsInBhZ2VZT2Zmc2V0IiwiZG9jdW1lbnRFbGVtZW50Iiwic2Nyb2xsVG9wIiwic2Nyb2xsVXAiLCJ2YWx1ZSIsInNjcm9sbFkiLCJzdCIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwiZW50cmllcyIsImVudHJ5IiwiaXNJbnRlcnNlY3RpbmciLCJtaW50b3AiLCJtYXh0b3AiLCJzcGVlZCIsIm5ld1kiLCJib3VuZGluZ0NsaWVudFJlY3QiLCJvcGFjaXR5Iiwib2JzZXJ2ZSJdLCJzb3VyY2VSb290IjoiIn0=