(self.webpackChunkscrollytelling_template=self.webpackChunkscrollytelling_template||[]).push([[792],{94871:(e,t,r)=>{"use strict";var a=r(19904),o=r(19313),n=r(84144),l=r.n(n);const s=JSON.parse('{"DD":"Titre de l\'article"}');let c=document.querySelectorAll(".social-buttons .svg");function i(e){return encodeURIComponent(e).replace(/%20/g,"+")}c.forEach((e=>{e.addEventListener("mouseover",(()=>{e.querySelector(".normal").style.display="none",e.querySelector(".hover").style.display="block"}))})),c.forEach((e=>{e.addEventListener("mouseout",(()=>{e.querySelector(".normal").style.display="block",e.querySelector(".hover").style.display="none"}))}));const d=i(window.location.href),u=i(s.DD),p=`https://www.linkedin.com/sharing/share-offsite/?url=${d}`,y=`https://twitter.com/intent/tweet?text=${u}+${d}`,m=`https://bsky.app/intent/compose?text=${u}+${d}`;document.querySelector(".linkedin").href=p,document.querySelector(".twitter").href=y,document.querySelector(".bluesky").href=m,r(66314),r(12453);var g=r(14685);const h=g.A.shapeFromText({text:"ðŸ§¸",scalar:2.5});document.addEventListener("mixmatch:completed",(e=>{console.log("event for mix");const t=e.target.getBoundingClientRect();var r,a;r=(t.left+t.width/2)/window.innerWidth,a=(t.top+t.height/2)/window.innerHeight,(0,g.A)({particleCount:80,spread:60,origin:{x:r,y:a}}),(0,g.A)({particleCount:20,spread:60,origin:{x:r,y:a},shapes:[h],scalar:2.5})}));var f=r(82617),v=r.n(f);function b(e){e.style.transform="translate(0px, 0px)",e.setAttribute("data-x",0),e.setAttribute("data-y",0),e.style.transition="transform 0.25s",setTimeout((()=>e.style.transition=""),300)}document.querySelectorAll(".mixAndMatch").forEach(((e,t)=>{e.dataset.gameId=`game-${t}`,function(e){const t=e.dataset.gameId;e.querySelectorAll(".draggable").forEach((e=>{e.style.transform="translate(0px, 0px)",e.setAttribute("data-x",0),e.setAttribute("data-y",0)})),v()(`[data-game-id="${t}"] .draggable`).draggable({inertia:!0,autoScroll:!1,modifiers:[v().modifiers.restrictRect({restriction:e,endOnly:!0})],listeners:{move(e){const t=e.target;let r=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,a=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.transform=`translate(${r}px, ${a}px)`,t.setAttribute("data-x",r),t.setAttribute("data-y",a)},end(e){const t=e.target;t.classList.contains("dropped")||b(t)}}}),v()(`[data-game-id="${t}"] .dropzone`).dropzone({accept:`[data-game-id="${t}"] .draggable`,overlap:.5,ondragenter(e){e.target.style.background="#c8f7c5"},ondragleave(e){e.target.style.background="#ddd"},ondrop(t){const r=t.relatedTarget,a=t.target,o=r.dataset.id,n=a.dataset.accept;if(a.style.background="#ddd",o===n){r.classList.add("dropped"),r.style.transform="translate(0px, 0px)",r.setAttribute("data-x",0),r.setAttribute("data-y",0),a.appendChild(r);const t=a.querySelector(".drop-label");t&&(t.innerText=""),a.style.pointerEvents="none",function(e){[...e.querySelectorAll(".dropzone")].every((e=>"none"===e.style.pointerEvents))&&(console.log("game "),e.dispatchEvent(new CustomEvent("mixmatch:completed",{bubbles:!0})))}(e)}else r.classList.remove("dropped"),b(r)}})}(e)}));let w=[];[".viz",".full-page-section > img",".full-page-section > video"].forEach((e=>{w=w.concat(Array.from(document.querySelectorAll(e)))})),(0,a.A)(w,{stickyBitStickyOffset:40}),o.Ubm("#collapseElement").each((function(e,t){const r=o.Ltv(this).select("#collapseContent"),a=o.Ltv(this).select("#collapseMenu");a.select("button").on("click",(()=>{r.classed("show-content",!r.classed("show-content"))})),a.select("#collapseMenuText").on("click",(()=>{r.classed("show-content",!r.classed("show-content"))}))})),new(l())({elements_selector:".lazy",threshold:500})},66314:()=>{document.querySelectorAll(".carousel").forEach((e=>{let t=0;const r=e.querySelector(".carousel-items"),a=e.querySelector(".carousel-caption"),o=r.querySelectorAll("figure"),n=a.querySelector(".previous"),l=a.querySelector(".next"),s=a.querySelector(".index"),c=a.querySelector(".text");function i(e){o.item(t).classList.remove("active"),t=e,r.style.left=100*-t+"%",o.item(t).classList.add("active"),n.disabled=0===t,l.disabled=t===o.length-1,s.innerHTML=`${t+1} / ${o.length}`,c.innerHTML=o.item(t).querySelector("figcaption").innerHTML}r.style.width=100*o.length+"%",i(t),o.forEach(((e,r)=>{e.addEventListener("click",(e=>{r!==t&&i(r)}))})),n.addEventListener("click",(()=>{t<=0||i(t-1)})),l.addEventListener("click",(()=>{t>=o.length-1||i(t+1)}))}))},12453:()=>{let e,t=document.querySelectorAll(".items");var r=window.pageYOffset||document.documentElement.scrollTop;let a;window.addEventListener("scroll",(()=>{let o=window.scrollY,n=window.pageYOffset||document.documentElement.scrollTop;n>r?a=!1:n<r&&(a=!0),r=n<=0?0:n,e=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){parseFloat(e.target.dataset.mintop),parseFloat(e.target.dataset.maxtop);let t=e.target.dataset.speed,r=e.boundingClientRect.y*o*t;e.target.style.opacity="1",e.target.style.transform="translateY("+r+"px)"}else e.target.style.opacity="0"}))})),t.forEach((t=>{e.observe(t)}))}),!1)}},e=>{var t=t=>e(e.s=t);e.O(0,[96],(()=>(t(84315),t(7452),t(94871)))),e.O()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T3FCLFFBQVE2RixRQUQ3QyxJQUVJQyxFQUFRSixFQUFNL0csT0FBT3FCLFFBQVE4RixNQUU3QkMsRUFET0wsRUFBTU0sbUJBQW1CbEgsRUFDbEJ1RyxFQUFRUyxFQUUxQkosRUFBTS9HLE9BQU9wQixNQUFNMEksUUFBVSxJQUlyQlAsRUFBTS9HLE9BQU9wQixNQUFNbUMsVUFBWSxjQUFlcUcsRUFBTSxLQVVoRSxNQUVJTCxFQUFNL0csT0FBT3BCLE1BQU0wSSxRQUFVLEdBQ2pDLEdBQ0YsSUFHTmxCLEVBQU01SCxTQUFRc0gsSUFDVkssRUFBU29CLFFBQVF6QixFQUFLLEdBQ3hCLElBQ0gsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9zZXRVcC9zb2NpYWxNZWRpYUhlYWRlci5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvc2VjdGlvbkNvbXBvbmVudHMvY29uZmV0dGkuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL3NlY3Rpb25Db21wb25lbnRzL21peEFuZE1hdGNoLmpzIiwid2VicGFjazovL3Njcm9sbHl0ZWxsaW5nLXRlbXBsYXRlLy4vc3JjL2FwcC9hcHAuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL3NlY3Rpb25Db21wb25lbnRzL2NvbGxhcHNlSXRlbS5qcyIsIndlYnBhY2s6Ly9zY3JvbGx5dGVsbGluZy10ZW1wbGF0ZS8uL3NyYy9hcHAvc2VjdGlvbkNvbXBvbmVudHMvY2Fyb3VzZWwuanMiLCJ3ZWJwYWNrOi8vc2Nyb2xseXRlbGxpbmctdGVtcGxhdGUvLi9zcmMvYXBwL3NlY3Rpb25Db21wb25lbnRzL3BhcmFsYXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogSU1QT1JUUyAqL1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi8uLi9jb25maWcuanNvbic7XG5cblxuLy9BZGQgSG92ZXIgZWZmZWN0IG9uIHNvY2lhbCBidXR0b25zXG5sZXQgc29jaWFsQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc29jaWFsLWJ1dHRvbnMgLnN2Z1wiKVxuXG4vL0Rpc3BsYXkgaG92ZXIgc3ZnXG5zb2NpYWxCdXR0b25zLmZvckVhY2goZWwgPT4ge1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgKCkgPT4ge1xuXG4gICAgICAgIGVsLnF1ZXJ5U2VsZWN0b3IoXCIubm9ybWFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuICAgICAgICBlbC5xdWVyeVNlbGVjdG9yKFwiLmhvdmVyXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCJcbiAgICB9KVxufSlcbi8vSGlkZSBob3ZlciBzdmdcbnNvY2lhbEJ1dHRvbnMuZm9yRWFjaChlbCA9PiB7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsICgpID0+IHtcblxuICAgICAgICBlbC5xdWVyeVNlbGVjdG9yKFwiLm5vcm1hbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiXG4gICAgICAgIGVsLnF1ZXJ5U2VsZWN0b3IoXCIuaG92ZXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXG4gICAgfSlcbn0pXG5cblxuLy9GdW5jdGlvbiB0aGF0IGVuY29kZXMgc3RyaW5nIGFuZCByZXBsYWNlcyBzcGFjZXMgYnkgK1xuZnVuY3Rpb24gZW5jb2RlU3RyaW5nKHN0cmluZykge1xuICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5nKS5yZXBsYWNlKC8lMjAvZywgJysnKTtcbn1cblxuY29uc3QgbW9kaWZpZWRVcmwgPSBlbmNvZGVTdHJpbmcod2luZG93LmxvY2F0aW9uLmhyZWYpXG5jb25zdCBtb2RpZmllZFRpdGxlID0gZW5jb2RlU3RyaW5nKGNvbmZpZy50aXRsZSlcblxuLy9CdWlsZCB0aGUgc29jaWFsIG1lZGlhIHNoYXJpbmcgVVJMXG5jb25zdCBsaW5rZWRpblNoYXJlVXJsID0gYGh0dHBzOi8vd3d3LmxpbmtlZGluLmNvbS9zaGFyaW5nL3NoYXJlLW9mZnNpdGUvP3VybD0ke21vZGlmaWVkVXJsfWA7XG5jb25zdCB0d2l0dGVyU2hhcmVVcmwgPSBgaHR0cHM6Ly90d2l0dGVyLmNvbS9pbnRlbnQvdHdlZXQ/dGV4dD0ke21vZGlmaWVkVGl0bGV9KyR7bW9kaWZpZWRVcmx9YDtcbmNvbnN0IGJsdWVza3lTaGFyZVVybCA9IGBodHRwczovL2Jza3kuYXBwL2ludGVudC9jb21wb3NlP3RleHQ9JHttb2RpZmllZFRpdGxlfSske21vZGlmaWVkVXJsfWBcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpbmtlZGluJykuaHJlZiA9IGxpbmtlZGluU2hhcmVVcmw7XG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnR3aXR0ZXJcIikuaHJlZiA9IHR3aXR0ZXJTaGFyZVVybDtcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYmx1ZXNreVwiKS5ocmVmID0gYmx1ZXNreVNoYXJlVXJsOyIsImltcG9ydCBjb25mZXR0aSBmcm9tIFwiY2FudmFzLWNvbmZldHRpXCI7XG5cbi8vIENyZWF0ZSB0aGUgZW1vamkgc2hhcGUgb25jZVxuY29uc3Qgc2NhbGFyID0gMi41O1xuY29uc3QgdGVkZHlTaGFwZSA9IGNvbmZldHRpLnNoYXBlRnJvbVRleHQoeyB0ZXh0OiBcIvCfp7hcIiwgc2NhbGFyIH0pO1xuXG4vLyBCdXJzdCBmdW5jdGlvbiB1c2VkIGZvciBib3RoIGNsaWNrIGFuZCBtaXhNYXRjaFxuZnVuY3Rpb24gZmlyZUNvbmZldHRpQXQoeCwgeSkge1xuICBjb25mZXR0aSh7XG4gICAgcGFydGljbGVDb3VudDogODAsXG4gICAgc3ByZWFkOiA2MCxcbiAgICBvcmlnaW46IHsgeCwgeSB9XG4gIH0pO1xuXG4gIGNvbmZldHRpKHtcbiAgICBwYXJ0aWNsZUNvdW50OiAyMCxcbiAgICBzcHJlYWQ6IDYwLFxuICAgIG9yaWdpbjogeyB4LCB5IH0sXG4gICAgc2hhcGVzOiBbdGVkZHlTaGFwZV0sXG4gICAgc2NhbGFyXG4gIH0pO1xufVxuXG4vLyBFeGlzdGluZyBsb2dpYyAoY2xpY2sgY29uZmV0dGkpXG4vLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFuc3dlclR5cGUuYWN0aXZlXCIpLmZvckVhY2goYnRuID0+IHtcbi8vICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuLy8gICAgIGxldCB4ID0gZS5jbGllbnRYIC8gd2luZG93LmlubmVyV2lkdGg7XG4vLyAgICAgbGV0IHkgPSBlLmNsaWVudFkgLyB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4vLyAgICAgZmlyZUNvbmZldHRpQXQoeCwgeSk7XG4vLyAgIH0pO1xuLy8gfSk7XG5cbi8vIE5FVzogTGlzdGVuIGZvciBNaXggJiBNYXRjaCBjb21wbGV0aW9uXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibWl4bWF0Y2g6Y29tcGxldGVkXCIsIChlKSA9PiB7XG4gIGNvbnNvbGUubG9nKFwiZXZlbnQgZm9yIG1peFwiKVxuICBjb25zdCBnYW1lRWwgPSBlLnRhcmdldDtcbiAgY29uc3QgcmVjdCA9IGdhbWVFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAvLyBmaXJlIGNvbmZldHRpIGZyb20gY2VudGVyIG9mIHRoZSBnYW1lXG4gIGNvbnN0IHggPSAocmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDIpIC8gd2luZG93LmlubmVyV2lkdGg7XG4gIGNvbnN0IHkgPSAocmVjdC50b3AgKyByZWN0LmhlaWdodCAvIDIpIC8gd2luZG93LmlubmVySGVpZ2h0O1xuXG4gIGZpcmVDb25mZXR0aUF0KHgsIHkpO1xufSk7XG4iLCJpbXBvcnQgaW50ZXJhY3QgZnJvbSBcImludGVyYWN0anNcIjtcblxuLy8gSW5pdGlhbGl6ZSBlYWNoIGdhbWUgc2VwYXJhdGVseVxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5taXhBbmRNYXRjaFwiKS5mb3JFYWNoKChnYW1lRWwsIGluZGV4KSA9PiB7XG4gIFxuICAvLyBHaXZlIGVhY2ggaW5zdGFuY2UgYSB1bmlxdWUgYXR0cmlidXRlIGZvciBzY29waW5nXG4gIGdhbWVFbC5kYXRhc2V0LmdhbWVJZCA9IGBnYW1lLSR7aW5kZXh9YDtcblxuICBzZXR1cE1peEFuZE1hdGNoR2FtZShnYW1lRWwpO1xufSk7XG5cbmZ1bmN0aW9uIHNldHVwTWl4QW5kTWF0Y2hHYW1lKGdhbWVFbCkge1xuXG4gIGNvbnN0IGdhbWVJZCA9IGdhbWVFbC5kYXRhc2V0LmdhbWVJZDtcblxuICAvLyBTYXZlIG9yaWdpbmFsIHBvc2l0aW9uc1xuICBnYW1lRWwucXVlcnlTZWxlY3RvckFsbChcIi5kcmFnZ2FibGVcIikuZm9yRWFjaChlbCA9PiB7XG4gICAgZWwuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUoMHB4LCAwcHgpXCI7XG4gICAgZWwuc2V0QXR0cmlidXRlKFwiZGF0YS14XCIsIDApO1xuICAgIGVsLnNldEF0dHJpYnV0ZShcImRhdGEteVwiLCAwKTtcbiAgfSk7XG5cbiAgLy8gTWFrZSBpdGVtcyBkcmFnZ2FibGUgZm9yICp0aGlzKiBnYW1lXG4gIGludGVyYWN0KGBbZGF0YS1nYW1lLWlkPVwiJHtnYW1lSWR9XCJdIC5kcmFnZ2FibGVgKS5kcmFnZ2FibGUoe1xuICAgIGluZXJ0aWE6IHRydWUsXG4gICAgYXV0b1Njcm9sbDogZmFsc2UsXG5cbiAgICBtb2RpZmllcnM6IFtcbiAgICAgICAgaW50ZXJhY3QubW9kaWZpZXJzLnJlc3RyaWN0UmVjdCh7XG4gICAgICAgICAgcmVzdHJpY3Rpb246IGdhbWVFbCwgICAgLy8gcmVzdHJpY3QgdG8gVEhJUyBzcGVjaWZpYyBnYW1lXG4gICAgICAgICAgZW5kT25seTogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgXSxcblxuICAgIGxpc3RlbmVyczoge1xuICAgICAgbW92ZShldmVudCkge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG5cbiAgICAgICAgbGV0IHggPSAocGFyc2VGbG9hdCh0YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS14XCIpKSB8fCAwKSArIGV2ZW50LmR4O1xuICAgICAgICBsZXQgeSA9IChwYXJzZUZsb2F0KHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXlcIikpIHx8IDApICsgZXZlbnQuZHk7XG5cbiAgICAgICAgdGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHt4fXB4LCAke3l9cHgpYDtcbiAgICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZShcImRhdGEteFwiLCB4KTtcbiAgICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZShcImRhdGEteVwiLCB5KTtcbiAgICAgIH0sXG5cbiAgICAgIGVuZChldmVudCkge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImRyb3BwZWRcIikpIHtcbiAgICAgICAgICByZXNldFBvc2l0aW9uKHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8vIERyb3B6b25lcyBmb3IgKnRoaXMqIGdhbWVcbiAgaW50ZXJhY3QoYFtkYXRhLWdhbWUtaWQ9XCIke2dhbWVJZH1cIl0gLmRyb3B6b25lYCkuZHJvcHpvbmUoe1xuICAgIGFjY2VwdDogYFtkYXRhLWdhbWUtaWQ9XCIke2dhbWVJZH1cIl0gLmRyYWdnYWJsZWAsXG4gICAgb3ZlcmxhcDogMC41LFxuXG4gICAgb25kcmFnZW50ZXIoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gXCIjYzhmN2M1XCI7XG4gICAgfSxcblxuICAgIG9uZHJhZ2xlYXZlKGV2ZW50KSB7XG4gICAgICBldmVudC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwiI2RkZFwiO1xuICAgIH0sXG5cbiAgICBvbmRyb3AoZXZlbnQpIHtcbiAgICAgIGNvbnN0IGRyYWdnYWJsZSA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQ7XG4gICAgICBjb25zdCBkcm9wem9uZSA9IGV2ZW50LnRhcmdldDtcblxuICAgICAgY29uc3QgZHJhZ0lkID0gZHJhZ2dhYmxlLmRhdGFzZXQuaWQ7XG4gICAgICBjb25zdCBhY2NlcHRJZCA9IGRyb3B6b25lLmRhdGFzZXQuYWNjZXB0O1xuXG4gICAgICBkcm9wem9uZS5zdHlsZS5iYWNrZ3JvdW5kID0gXCIjZGRkXCI7XG5cbiAgICAgIGlmIChkcmFnSWQgPT09IGFjY2VwdElkKSB7XG4gICAgICAgIGRyYWdnYWJsZS5jbGFzc0xpc3QuYWRkKFwiZHJvcHBlZFwiKTtcblxuICAgICAgICBkcmFnZ2FibGUuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUoMHB4LCAwcHgpXCI7XG4gICAgICAgIGRyYWdnYWJsZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXhcIiwgMCk7XG4gICAgICAgIGRyYWdnYWJsZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXlcIiwgMCk7XG5cbiAgICAgICAgZHJvcHpvbmUuYXBwZW5kQ2hpbGQoZHJhZ2dhYmxlKTtcblxuICAgICAgICBjb25zdCBsYWJlbCA9IGRyb3B6b25lLnF1ZXJ5U2VsZWN0b3IoXCIuZHJvcC1sYWJlbFwiKTtcbiAgICAgICAgaWYgKGxhYmVsKSB7XG4gICAgICAgICAgICBsYWJlbC5pbm5lclRleHQgPSBcIlwiXG4gICAgICAgIH1cblxuICAgICAgICBkcm9wem9uZS5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7XG5cbiAgICAgICAgLy8g4q2QIENIRUNLIElGIEdBTUUgSVMgQ09NUExFVEVEIEJFRk9SRSBGSVJJTkcgRVZFTlRcbiAgICAgICAgY2hlY2tJZkdhbWVGaW5pc2hlZChnYW1lRWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZHJhZ2dhYmxlLmNsYXNzTGlzdC5yZW1vdmUoXCJkcm9wcGVkXCIpO1xuICAgICAgICByZXNldFBvc2l0aW9uKGRyYWdnYWJsZSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuLy8g8J+OryBDaGVja3MgaWYgdGhlIGdhbWUgaXMgY29tcGxldGVcbmZ1bmN0aW9uIGNoZWNrSWZHYW1lRmluaXNoZWQoZ2FtZUVsKSB7XG4gICAgY29uc3QgZHJvcHpvbmVzID0gZ2FtZUVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZHJvcHpvbmVcIik7XG4gIFxuICAgIGNvbnN0IGFsbENvbXBsZXRlZCA9IFsuLi5kcm9wem9uZXNdLmV2ZXJ5KHpvbmUgPT5cbiAgICAgIHpvbmUuc3R5bGUucG9pbnRlckV2ZW50cyA9PT0gXCJub25lXCJcbiAgICApO1xuICBcbiAgICBpZiAoYWxsQ29tcGxldGVkKSB7XG4gICAgICBjb25zb2xlLmxvZyhcImdhbWUgXCIpXG4gICAgICBnYW1lRWwuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJtaXhtYXRjaDpjb21wbGV0ZWRcIiwgeyBidWJibGVzOiB0cnVlIH0pKTtcbiAgICB9XG4gIH1cblxuZnVuY3Rpb24gcmVzZXRQb3NpdGlvbihlbCkge1xuICBlbC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZSgwcHgsIDBweClcIjtcbiAgZWwuc2V0QXR0cmlidXRlKFwiZGF0YS14XCIsIDApO1xuICBlbC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXlcIiwgMCk7XG5cbiAgZWwuc3R5bGUudHJhbnNpdGlvbiA9IFwidHJhbnNmb3JtIDAuMjVzXCI7XG4gIHNldFRpbWVvdXQoKCkgPT4gKGVsLnN0eWxlLnRyYW5zaXRpb24gPSBcIlwiKSwgMzAwKTtcbn1cbiIsIi8qKlxuICogYXBwLmpzXG4gKiA9PT09PT1cbiAqIE1haW4gZmlsZSBvZiB0aGUgYXBwbGljYXRpb24uIFRoaXMgZmlsZSBpcyB1c2VkIHRvIGluaXRpYWxpemUgdGhlIHNjcm9sbGVyIGFuZCBpbXBvcnRzIHRoZSB2aXN1YWxpemF0aW9ucyB1c2VkLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0ICcuLi9hc3NldHMvc3R5bGVzL3N0eWxlLnNjc3MnO1xuXG5jb25zdCBoZWFkZXJIZWlnaHQgPSA0MDtcbmltcG9ydCBzdGlja3lCaXRzIGZyb20gJ3N0aWNreWJpdHMnXG5cbmxldCBlbGVtZW50cyA9IFtdO1xuWycudml6JywgJy5mdWxsLXBhZ2Utc2VjdGlvbiA+IGltZycsICcuZnVsbC1wYWdlLXNlY3Rpb24gPiB2aWRlbyddLmZvckVhY2goc2VsZWN0b3IgPT4ge1xuICBlbGVtZW50cyA9IGVsZW1lbnRzLmNvbmNhdChBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKSk7XG59KTtcbnN0aWNreUJpdHMoZWxlbWVudHMsIHsgc3RpY2t5Qml0U3RpY2t5T2Zmc2V0OiBoZWFkZXJIZWlnaHQgfSk7XG5cbmltcG9ydCB7IGluaXRpYWxpemUgYXMgdjEgfSBmcm9tICcuL3NlY3Rpb25Db21wb25lbnRzL3Zpeic7XG5pbXBvcnQgeyBzY3JvbGxlciB9IGZyb20gJy4vc2V0VXAvc2Nyb2xsZXInO1xuaW1wb3J0IExhenlMb2FkIGZyb20gXCJ2YW5pbGxhLWxhenlsb2FkXCI7XG5pbXBvcnQgJy4vc2V0VXAvc29jaWFsTWVkaWFIZWFkZXInXG5cbmltcG9ydCB7IGNvbGxhcHNlSXRlbSB9IGZyb20gXCIuL3NlY3Rpb25Db21wb25lbnRzL2NvbGxhcHNlSXRlbVwiO1xuaW1wb3J0ICcuL3NlY3Rpb25Db21wb25lbnRzL2Nhcm91c2VsJztcbmltcG9ydCAnLi9zZWN0aW9uQ29tcG9uZW50cy9wYXJhbGF4JztcbmltcG9ydCAnLi9zZWN0aW9uQ29tcG9uZW50cy9jb25mZXR0aSc7XG5pbXBvcnQgJy4vc2VjdGlvbkNvbXBvbmVudHMvbWl4QW5kTWF0Y2gnO1xuXG5jb2xsYXBzZUl0ZW0oKVxuXG5cbmNvbnN0IGxsID0gbmV3IExhenlMb2FkKHtcbiAgZWxlbWVudHNfc2VsZWN0b3I6IFwiLmxhenlcIixcbiAgdGhyZXNob2xkOiA1MDBcbn0pO1xuXG4iLCJpbXBvcnQgKiBhcyBkMyBmcm9tIFwiZDNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbGxhcHNlSXRlbSgpIHtcbiAgY29uc3QgYWxsQ29sbGFwc2VFbGVtID0gZDMuc2VsZWN0QWxsKFwiI2NvbGxhcHNlRWxlbWVudFwiKTtcblxuICBhbGxDb2xsYXBzZUVsZW0uZWFjaChmdW5jdGlvbiAoZCwgaSkge1xuICAgIGNvbnN0IGNvbGxhcHNlQ29udGVudCA9IGQzLnNlbGVjdCh0aGlzKVxuICAgICAgLnNlbGVjdChcIiNjb2xsYXBzZUNvbnRlbnRcIik7XG5cbiAgICBjb25zdCBjb2xsYXBzZU1lbnUgPSBkMy5zZWxlY3QodGhpcylcbiAgICAgIC5zZWxlY3QoXCIjY29sbGFwc2VNZW51XCIpO1xuXG4gICAgY29sbGFwc2VNZW51LnNlbGVjdChcImJ1dHRvblwiKVxuICAgICAgLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY29sbGFwc2VDb250ZW50LmNsYXNzZWQoJ3Nob3ctY29udGVudCcsICFjb2xsYXBzZUNvbnRlbnQuY2xhc3NlZCgnc2hvdy1jb250ZW50JykpO1xuICAgICAgfSk7XG5cbiAgICBjb2xsYXBzZU1lbnUuc2VsZWN0KFwiI2NvbGxhcHNlTWVudVRleHRcIilcbiAgICAgIC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNvbGxhcHNlQ29udGVudC5jbGFzc2VkKCdzaG93LWNvbnRlbnQnLCAhY29sbGFwc2VDb250ZW50LmNsYXNzZWQoJ3Nob3ctY29udGVudCcpKTtcbiAgICAgIH0pO1xuICB9KTtcbn0iLCJkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2Fyb3VzZWwnKS5mb3JFYWNoKGNhcm91c2VsID0+IHtcbiAgbGV0IGluZGV4ICA9IDA7XG5cbiAgY29uc3QgY29udGFpbmVyID0gY2Fyb3VzZWwucXVlcnlTZWxlY3RvcignLmNhcm91c2VsLWl0ZW1zJyk7XG4gIGNvbnN0IGNhcHRpb24gPSBjYXJvdXNlbC5xdWVyeVNlbGVjdG9yKCcuY2Fyb3VzZWwtY2FwdGlvbicpO1xuXG4gIGNvbnN0IGZpZ3VyZXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnZmlndXJlJyk7XG4gIGNvbnN0IHByZXZpb3VzQnV0dG9uID0gY2FwdGlvbi5xdWVyeVNlbGVjdG9yKCcucHJldmlvdXMnKTtcbiAgY29uc3QgbmV4dEJ1dHRvbiA9IGNhcHRpb24ucXVlcnlTZWxlY3RvcignLm5leHQnKTtcblxuICBjb25zdCBpbmRleFRleHQgPSBjYXB0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5pbmRleCcpO1xuICBjb25zdCBjYXB0aW9uVGV4dCA9IGNhcHRpb24ucXVlcnlTZWxlY3RvcignLnRleHQnKTtcblxuICBjb250YWluZXIuc3R5bGUud2lkdGggPSBgJHtmaWd1cmVzLmxlbmd0aCAqIDEwMH0lYDtcbiAgdXBkYXRlKGluZGV4KTtcblxuICBmaWd1cmVzLmZvckVhY2goKGZpZ3VyZSwgaSkgPT4ge1xuICAgIGZpZ3VyZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgaWYgKGkgPT09IGluZGV4KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHVwZGF0ZShpKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgcHJldmlvdXNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYgKGluZGV4IDw9IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdXBkYXRlKGluZGV4IC0gMSk7XG4gIH0pO1xuXG4gIG5leHRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYgKGluZGV4ID49IGZpZ3VyZXMubGVuZ3RoIC0gMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB1cGRhdGUoaW5kZXggKyAxKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gdXBkYXRlKGkpIHtcbiAgICBmaWd1cmVzLml0ZW0oaW5kZXgpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIGluZGV4ID0gaTtcbiAgICBjb250YWluZXIuc3R5bGUubGVmdCA9IGAkey1pbmRleCAqIDEwMH0lYDtcbiAgICBmaWd1cmVzLml0ZW0oaW5kZXgpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIHByZXZpb3VzQnV0dG9uLmRpc2FibGVkID0gaW5kZXggPT09IDA7XG4gICAgbmV4dEJ1dHRvbi5kaXNhYmxlZCA9IGluZGV4ID09PSBmaWd1cmVzLmxlbmd0aCAtIDE7XG4gICAgaW5kZXhUZXh0LmlubmVySFRNTCA9IGAke2luZGV4ICsgMX0gLyAke2ZpZ3VyZXMubGVuZ3RofWA7XG4gICAgY2FwdGlvblRleHQuaW5uZXJIVE1MID0gZmlndXJlcy5pdGVtKGluZGV4KS5xdWVyeVNlbGVjdG9yKCdmaWdjYXB0aW9uJykuaW5uZXJIVE1MO1xuICB9XG59KTtcbiIsImxldCBpdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaXRlbXNcIilcbmxldCBvYnNlcnZlcjtcbnZhciBsYXN0U2Nyb2xsVG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG5sZXQgc2Nyb2xsVXA7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsICgpPT57XG4gICAgbGV0IHZhbHVlID0gd2luZG93LnNjcm9sbFlcbiAgICBsZXQgc3QgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcbiAgICBcblxuICAgIGlmIChzdCA+IGxhc3RTY3JvbGxUb3Ape1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwic2Nyb2xsaW5nIGRvd25cIilcbiAgICAgICAgc2Nyb2xsVXAgPSBmYWxzZVxuICAgfWVsc2UgaWYgKHN0IDwgbGFzdFNjcm9sbFRvcCl7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJzY3JvbGxpbmcgdXBcIilcbiAgICAgICAgc2Nyb2xsVXAgPSB0cnVlXG4gICB9XG5cbiAgIGxhc3RTY3JvbGxUb3AgPSBzdCA8PSAwID8gMCA6IHN0O1xuXG4gICAgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoZW50cmllcyA9PiB7XG4gICAgICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PntcbiAgICAgICAgICAgIGlmKGVudHJ5LmlzSW50ZXJzZWN0aW5nKXtcbiAgICAgICAgICAgICAgICBsZXQgbWluVG9wID1wYXJzZUZsb2F0KGVudHJ5LnRhcmdldC5kYXRhc2V0Lm1pbnRvcClcbiAgICAgICAgICAgICAgICBsZXQgbWF4VG9wID0gcGFyc2VGbG9hdChlbnRyeS50YXJnZXQuZGF0YXNldC5tYXh0b3ApXG4gICAgICAgICAgICAgICAgbGV0IHNwZWVkID0gZW50cnkudGFyZ2V0LmRhdGFzZXQuc3BlZWRcbiAgICAgICAgICAgICAgICBsZXQgcG9zWSA9IGVudHJ5LmJvdW5kaW5nQ2xpZW50UmVjdC55XG4gICAgICAgICAgICAgICAgbGV0IG5ld1kgPSBwb3NZICogdmFsdWUgKiBzcGVlZFxuXG4gICAgICAgICAgICAgICAgZW50cnkudGFyZ2V0LnN0eWxlLm9wYWNpdHkgPSBcIjFcIjtcblxuICAgICAgICAgICAgICAgIGlmKHNjcm9sbFVwKXtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKG5ld1kgPD0gbWluVG9wKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LnRhcmdldC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVkoXCIrIG5ld1kgK1wicHgpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvL31cbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKG5ld1kgPj0gbWF4VG9wKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LnRhcmdldC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVkoXCIrIG5ld1kgK1wicHgpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvL31cblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdub3QgaW50ZXJzZWN0aW5nJylcbiAgICAgICAgICAgICAgICBlbnRyeS50YXJnZXQuc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGl0ZW0pXG4gICAgfSlcbn0sIGZhbHNlKVxuXG5cbiJdLCJuYW1lcyI6WyJzb2NpYWxCdXR0b25zIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZW5jb2RlU3RyaW5nIiwic3RyaW5nIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicmVwbGFjZSIsImZvckVhY2giLCJlbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJxdWVyeVNlbGVjdG9yIiwic3R5bGUiLCJkaXNwbGF5IiwibW9kaWZpZWRVcmwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJtb2RpZmllZFRpdGxlIiwiY29uZmlnIiwibGlua2VkaW5TaGFyZVVybCIsInR3aXR0ZXJTaGFyZVVybCIsImJsdWVza3lTaGFyZVVybCIsInRlZGR5U2hhcGUiLCJjb25mZXR0aSIsInNoYXBlRnJvbVRleHQiLCJ0ZXh0Iiwic2NhbGFyIiwiZSIsImNvbnNvbGUiLCJsb2ciLCJyZWN0IiwidGFyZ2V0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwieCIsInkiLCJsZWZ0Iiwid2lkdGgiLCJpbm5lcldpZHRoIiwidG9wIiwiaGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJwYXJ0aWNsZUNvdW50Iiwic3ByZWFkIiwib3JpZ2luIiwic2hhcGVzIiwicmVzZXRQb3NpdGlvbiIsInRyYW5zZm9ybSIsInNldEF0dHJpYnV0ZSIsInRyYW5zaXRpb24iLCJzZXRUaW1lb3V0IiwiZ2FtZUVsIiwiaW5kZXgiLCJkYXRhc2V0IiwiZ2FtZUlkIiwiaW50ZXJhY3QiLCJkcmFnZ2FibGUiLCJpbmVydGlhIiwiYXV0b1Njcm9sbCIsIm1vZGlmaWVycyIsInJlc3RyaWN0UmVjdCIsInJlc3RyaWN0aW9uIiwiZW5kT25seSIsImxpc3RlbmVycyIsIm1vdmUiLCJldmVudCIsInBhcnNlRmxvYXQiLCJnZXRBdHRyaWJ1dGUiLCJkeCIsImR5IiwiZW5kIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJkcm9wem9uZSIsImFjY2VwdCIsIm92ZXJsYXAiLCJvbmRyYWdlbnRlciIsImJhY2tncm91bmQiLCJvbmRyYWdsZWF2ZSIsIm9uZHJvcCIsInJlbGF0ZWRUYXJnZXQiLCJkcmFnSWQiLCJpZCIsImFjY2VwdElkIiwiYWRkIiwiYXBwZW5kQ2hpbGQiLCJsYWJlbCIsImlubmVyVGV4dCIsInBvaW50ZXJFdmVudHMiLCJldmVyeSIsInpvbmUiLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJidWJibGVzIiwiY2hlY2tJZkdhbWVGaW5pc2hlZCIsInJlbW92ZSIsInNldHVwTWl4QW5kTWF0Y2hHYW1lIiwiZWxlbWVudHMiLCJzZWxlY3RvciIsImNvbmNhdCIsIkFycmF5IiwiZnJvbSIsInN0aWNreUJpdHMiLCJzdGlja3lCaXRTdGlja3lPZmZzZXQiLCJkMyIsImVhY2giLCJkIiwiaSIsImNvbGxhcHNlQ29udGVudCIsInRoaXMiLCJzZWxlY3QiLCJjb2xsYXBzZU1lbnUiLCJvbiIsImNsYXNzZWQiLCJMYXp5TG9hZCIsImVsZW1lbnRzX3NlbGVjdG9yIiwidGhyZXNob2xkIiwiY2Fyb3VzZWwiLCJjb250YWluZXIiLCJjYXB0aW9uIiwiZmlndXJlcyIsInByZXZpb3VzQnV0dG9uIiwibmV4dEJ1dHRvbiIsImluZGV4VGV4dCIsImNhcHRpb25UZXh0IiwidXBkYXRlIiwiaXRlbSIsImRpc2FibGVkIiwibGVuZ3RoIiwiaW5uZXJIVE1MIiwiZmlndXJlIiwib2JzZXJ2ZXIiLCJpdGVtcyIsImxhc3RTY3JvbGxUb3AiLCJwYWdlWU9mZnNldCIsImRvY3VtZW50RWxlbWVudCIsInNjcm9sbFRvcCIsInNjcm9sbFVwIiwidmFsdWUiLCJzY3JvbGxZIiwic3QiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsImVudHJpZXMiLCJlbnRyeSIsImlzSW50ZXJzZWN0aW5nIiwibWludG9wIiwibWF4dG9wIiwic3BlZWQiLCJuZXdZIiwiYm91bmRpbmdDbGllbnRSZWN0Iiwib3BhY2l0eSIsIm9ic2VydmUiXSwic291cmNlUm9vdCI6IiJ9